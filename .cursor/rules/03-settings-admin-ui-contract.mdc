---
description: Settings/Admin UI contract (prevent layout drift)
alwaysApply: true
---

# Settings/Admin UI must follow contract

When changing **any Settings/Admin UI** (Settings page, Admin panels, or Settings-rendered sub-panels):

- Follow `docs/UI_SETTINGS_CONTRACT.md` (canonical rules).
- **Tabs/accordion headers are the section headers.** Do not add new first-card headers inside sub-panels.
- Panels must have **exactly one** `.settings-panel-wrap` as the **direct** child (no nested layout; normaliser enforces this).
- Layout defaults to stacked single-column cards. **Use `.settings-responsive-grid` for 2+ repeated like-for-like items** (colors, icons, variants, etc.); never Bootstrap `.row`/`.d-grid` for tiles.
- **No `btn-secondary`** in Settings/Admin UI — use `btn btn-outline-secondary btn-md`.
- No inline styles in Settings renderers; use `server/public/settings-ui.css` for Settings-only styling.
- Read-only / env-backed fields must look read-only (`form-control-plaintext`) and include a read-only hint.
- Prefer Tabler patterns/utilities; avoid bespoke layout wrappers.

## Guardrails you must keep passing

Before landing changes:

- `npm run ui:check`
- `npm test` (includes Settings/Admin layout contract test)

## Don’t bypass the guardrails

- Do not re-implement Settings normalisation logic inside `server/public/settings-page.js`.
  - Use the shared module: `server/public/ui/settings-normaliser.js`.
- Do not add Settings-only CSS to random global files.
  - Use `server/public/settings-ui.css` for Settings-only rules.

