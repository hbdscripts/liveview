---
description: Commit changes and update project memory
globs: 
alwaysApply: true
---

# Commit and project memory

- **Commit changes yourself**: When you make code or config changes in this project, commit them (stage, commit with a clear message). Do not tell the user to run git commands unless they asked you not to commit (e.g. "don't commit").
- **Always push after commit**: After every commit, **run `git push origin main` yourself** (or the current branch). Do not tell the user to push â€” do it in the same turn. Skip only if the user explicitly asked you not to push.
- **Deployment reality check**: GitHub Actions workflows in this repo are **manual** (`workflow_dispatch`). Railway *may* auto-deploy from GitHub, but if code isn't live yet, deploy from this workspace with `railway up --detach -m "<message>"` (linked to production `liveview` service).
- **Railway DB_URL caveat**: In production `DB_URL` may point at `postgres.railway.internal` (internal DNS). `railway run ...` executes locally and **cannot** resolve that host. To run DB scripts, run them in the deployed container via `railway ssh -- <command>` or rely on startup migrations in `server/index.js`.
- **Update project memory/config**: When you establish a new convention, fix a recurring issue, or add something future agents should know (e.g. "Git is on PATH", "always run migrations on startup", "Railway vars must be on the service not only Shared Variables"), add or update it in project docs or this rules directory so future Cursor agents in this project remember it.
- **Production pruning**: `npm start` runs `scripts/prune-runtime-files.js` to remove non-runtime files (docs, scripts, workers, extensions, .cursor, .github, etc.) so they do not remain on the server.
