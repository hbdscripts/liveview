'use strict';

function toBooleanMap(keys) {
  const out = {};
  for (const key of keys) out[String(key)] = true;
  return out;
}

const LOCKED_SETTINGS_ICON_KEYS = Object.freeze(toBooleanMap([
  'settings-tab-theme',
  'settings-tab-data-reporting',
  'settings-tab-integrations',
  'settings-tab-sources',
  'settings-tab-kpis',
  'settings-tab-insights',
  'settings-tab-charts',
  'settings-tab-layout',
  'settings-tab-diagnostics',
  'settings-diagnostics-refresh',
  'settings-diagnostics-reconcile',
]));

const LEGACY_THEME_ICON_KEYS = Object.freeze(toBooleanMap([
  'mobile-menu',
  'mobile-date',
  'nav-item-theme',
  'footer-sound',
  'footer-sound-muted',
  'footer-theme',
  'footer-settings',
  'footer-signout',
]));

const REQUIRED_ACTIVE_ICON_KEYS = Object.freeze([
  'nav-item-admin',
  'admin-tab-controls',
  'admin-tab-diagnostics',
  'admin-tab-users',
  'footer-settings-toggle',
  'nav-dropdown-arrow',
  'chart-builder-icon',
  'tools-click-order-lookup-search',
  'table-icon-converted-sale',
  'table-icon-compliance-header',
  'table-icon-compliance-check',
  'table-icon-compliance-warning',
  'table-icon-compliance-search',
  'table-sticky-resize-handle',
  'fraud-alert',
]);

const ICON_GLYPH_DEFAULTS = Object.freeze({
  'mobile-menu': 'fa-bars',
  'mobile-date': 'fa-calendar-days',
  'topnav-date-chevron': 'fa-chevron-down',
  'nav-toggle-dashboard': 'fa-table-cells-large',
  'nav-toggle-breakdown': 'fa-chart-pie',
  'nav-toggle-traffic': 'fa-route',
  'nav-toggle-integrations': 'fa-puzzle-piece',
  'nav-toggle-tools': 'fa-screwdriver-wrench',
  'nav-toggle-settings': 'fa-gear',
  'nav-dropdown-arrow': 'fa-solid fa-angle-right',
  'nav-item-overview': 'fa-house',
  'nav-item-live': 'fa-satellite-dish',
  'nav-item-sales': 'fa-cart-shopping',
  'nav-item-table': 'fa-table',
  'nav-item-countries': 'fa-globe',
  'nav-item-products': 'fa-box-open',
  'nav-item-variants': 'fa-bezier-curve',
  'nav-item-channels': 'fa-diagram-project',
  'nav-item-type': 'fa-table-cells',
  'nav-item-ads': 'fa-rectangle-ad',
  'nav-item-tools': 'fa-toolbox',
  'nav-item-settings': 'fa-gear',
  'nav-item-refresh': 'fa-rotate-right',
  'nav-item-sound-on': 'fa-volume-high',
  'nav-item-sound-off': 'fa-volume-xmark',
  'nav-item-theme': 'fa-palette',
  'nav-item-signout': 'fa-right-from-bracket',
  'nav-item-admin': 'fa-user-gear',
  'tools-click-order-lookup-search': 'fa-magnifying-glass',
  'table-icon-cr': 'fa-percent',
  'table-icon-vpv': 'fa-coins',
  'table-icon-orders': 'fa-box-open',
  'table-icon-sessions': 'fa-users',
  'table-icon-revenue': 'fa-sterling-sign',
  'table-icon-converted-sale': 'fa-solid fa-sterling-sign',
  'table-icon-compliance-header': 'fa-shield-check',
  'table-icon-compliance-check': 'fa-circle-check',
  'table-icon-compliance-warning': 'fa-triangle-exclamation',
  'table-icon-compliance-search': 'fa-magnifying-glass',
  'fraud-alert': 'fa-jelly-filled fa-triangle-exclamation',
  'table-icon-clicks': 'fa-hand-pointer',
  'table-icon-variants-variant': 'fa-shapes',
  'table-icon-variants-sessions': 'fa-users',
  'table-icon-variants-orders': 'fa-box-open',
  'table-icon-variants-cr': 'fa-percent',
  'table-icon-variants-revenue': 'fa-sterling-sign',
  'settings-tab-theme': 'fa-palette',
  'settings-tab-data-reporting': 'fa-chart-column',
  'settings-tab-integrations': 'fa-plug',
  'settings-tab-sources': 'fa-map-location-dot',
  'settings-tab-kpis': 'fa-gauge-high',
  'settings-tab-insights': 'fa-chart-pie',
  'settings-tab-charts': 'fa-chart-pie',
  'settings-tab-layout': 'fa-table-columns',
  'settings-tab-diagnostics': 'fa-chart-line',
  'settings-diagnostics-refresh': 'fa-rotate-right',
  'settings-diagnostics-reconcile': 'fa-sliders',
  'admin-tab-controls': 'fa-sliders',
  'admin-tab-diagnostics': 'fa-chart-line',
  'admin-tab-users': 'fa-users',
  'footer-refresh': 'fa-rotate-right',
  'footer-sound': 'fa-volume-high',
  'footer-sound-muted': 'fa-volume-xmark',
  'footer-theme': 'fa-palette',
  'footer-settings': 'fa-gear',
  'footer-settings-toggle': 'fa-gear',
  'footer-signout': 'fa-right-from-bracket',
  'footer-last-sale-show': 'fa-eye',
  'footer-last-sale-hide': 'fa-eye-slash',
  'footer-back-to-top': 'fa-arrow-up',
  'footer-notes': 'fa-pen',
  'side-panel-close': 'fa-xmark',
  'side-panel-activity': 'fa-list',
  'side-panel-details': 'fa-user',
  'side-panel-source': 'fa-link',
  'side-panel-network': 'fa-cloud',
  'kpi-compare-refresh': 'fa-rotate-right',
  'kpi-compare-close': 'fa-xmark',
  'kpi-compare-date-info': 'fa-circle-info',
  'kexo-score-help': 'fa-jelly fa-question',
  'live-landing-entry': 'fa-circle-check',
  'live-landing-exit': 'fa-circle-check',
  'live-bought-overlay': 'fa-cart-shopping',
  'pagination-prev': 'fa-chevron-left',
  'pagination-next': 'fa-chevron-right',
  'breakdown-placeholder-image': 'fa-image',
  'breakdown-icon-image': 'fa-image',
  'breakdown-icon-star': 'fa-star',
  'breakdown-icon-chart-column': 'fa-chart-column',
  'breakdown-icon-link': 'fa-link',
  'type-device-desktop': 'fa-desktop',
  'type-device-mobile': 'fa-mobile-screen',
  'type-device-tablet': 'fa-tablet-screen-button',
  'type-device-unknown': 'fa-globe',
  'type-platform-ios': 'fa-apple',
  'type-platform-mac': 'fa-apple',
  'type-platform-android': 'fa-android',
  'type-platform-windows': 'fa-windows',
  'type-platform-chromeos': 'fa-brands fa-chrome',
  'type-platform-linux': 'fa-linux',
  'type-platform-unknown': 'fa-circle-question',
  'diag-copy': 'fa-copy',
  'ads-status-warning': 'fa-triangle-exclamation',
  'ads-status-connected': 'fa-circle-check',
  'ads-status-disconnected': 'fa-circle-xmark',
  'ads-actions-refresh': 'fa-rotate-right',
  'ads-actions-audit': 'fa-circle-info',
  'chart-type-area': 'fa-chart-area',
  'chart-type-bar': 'fa-chart-column',
  'chart-type-line': 'fa-chart-line',
  'table-short-geo': 'fa-globe',
  'table-short-country-product': 'fa-globe',
  'table-short-source': 'fa-link',
  'table-short-landing': 'fa-link',
  'table-short-device': 'fa-mobile-screen',
  'table-short-cart': 'fa-box-open',
  'table-short-arrived': 'fa-circle-check',
  'table-short-seen': 'fa-eye',
  'table-short-history': 'fa-list',
  'table-short-type': 'fa-table-cells',
  'table-short-product': 'fa-box-open',
  'table-short-consent': 'fa-circle-info',
  'table-builder-icon': 'fa-light fa-gear',
  'chart-builder-icon': 'fa-light fa-gear',
  'table-sticky-resize-handle': 'fa-solid fa-left-right',
  'card-title-online': 'fa-jelly-filled fa-users',
  'card-title-revenue': 'fa-jelly-filled fa-sterling-sign',
  'card-title-orders': 'fa-jelly-filled fa-box-open',
  'card-title-conversion': 'fa-jelly-filled fa-percent',
  'card-title-sessions': 'fa-jelly-filled fa-users',
  'card-title-countries': 'fa-jelly-filled fa-globe',
  'card-title-products': 'fa-jelly-filled fa-box-open',
  'card-title-channels': 'fa-jelly-filled fa-diagram-project',
  'card-title-type': 'fa-jelly-filled fa-table-cells',
  'card-title-ads': 'fa-brands fa-google',
  'card-title-tools': 'fa-jelly-filled fa-toolbox',
  'card-title-settings': 'fa-jelly-filled fa-gear',
  'card-title-date': 'fa-jelly-filled fa-calendar-days',
  'card-title-dashboard': 'fa-jelly-filled fa-gauge-high',
  'card-title-traffic': 'fa-jelly-filled fa-route',
  'card-title-trending-up': 'fa-jelly-filled fa-arrow-trend-up',
  'card-title-trending-down': 'fa-jelly-filled fa-arrow-trend-down',
  'card-title-chart': 'fa-jelly-filled fa-chart-line',
  'card-title-table-dash-top-products': 'fa-jelly-filled fa-chart-line',
  'card-title-table-dash-top-countries': 'fa-jelly-filled fa-globe',
  'card-title-table-dash-trending-up': 'fa-jelly-filled fa-arrow-trend-up',
  'card-title-table-dash-trending-down': 'fa-jelly-filled fa-arrow-trend-down',
  'card-title-table-latest-sales': 'fa-jelly-filled fa-cart-shopping',
  'card-title-table-sessions': 'fa-jelly-filled fa-users',
  'card-title-table-country': 'fa-jelly-filled fa-map-location-dot',
  'card-title-table-country-product': 'fa-jelly-filled fa-globe-americas',
  'card-title-table-best-sellers': 'fa-jelly-filled fa-trophy',
  'card-title-table-best-variants': 'fa-jelly-filled fa-shapes',
  'card-title-table-necklaces': 'fa-jelly-filled fa-gem',
  'card-title-table-bracelets': 'fa-jelly-filled fa-circle',
  'card-title-table-earrings': 'fa-jelly-filled fa-heart',
  'card-title-table-sets': 'fa-jelly-filled fa-layer-group',
  'card-title-table-charms': 'fa-jelly-filled fa-star',
  'card-title-table-extras': 'fa-jelly-filled fa-puzzle-piece',
  'card-title-table-channels': 'fa-jelly-filled fa-diagram-project',
  'card-title-table-device': 'fa-jelly-filled fa-table-cells',
  'card-title-table-ads': 'fa-brands fa-google',
  'card-title-table-variants': 'fa-jelly-filled fa-bezier-curve',
  'dash-kpi-delta-up': 'fa-arrow-trend-up',
  'dash-kpi-delta-down': 'fa-arrow-trend-down',
  'dash-kpi-delta-flat': 'fa-minus',
  'online-status-indicator': 'fa-circle',
  'card-collapse-expanded': 'fa-chevron-down',
  'card-collapse-collapsed': 'fa-chevron-right',
});

function getThemeIconGlyphSettingKeys() {
  return Object.keys(ICON_GLYPH_DEFAULTS)
    .sort()
    .map((name) => 'theme_icon_glyph_' + String(name).replace(/-/g, '_'));
}

function cloneObjectMap(map) {
  return Object.assign({}, map || {});
}

function getBrowserRegistryPayload() {
  return {
    iconGlyphDefaults: cloneObjectMap(ICON_GLYPH_DEFAULTS),
    lockedSettingsIconKeys: cloneObjectMap(LOCKED_SETTINGS_ICON_KEYS),
    legacyThemeIconKeys: cloneObjectMap(LEGACY_THEME_ICON_KEYS),
    requiredActiveIconKeys: REQUIRED_ACTIVE_ICON_KEYS.slice(),
    iconGlyphKeys: Object.keys(ICON_GLYPH_DEFAULTS).sort(),
  };
}

module.exports = {
  ICON_GLYPH_DEFAULTS,
  LOCKED_SETTINGS_ICON_KEYS,
  LEGACY_THEME_ICON_KEYS,
  REQUIRED_ACTIVE_ICON_KEYS,
  getThemeIconGlyphSettingKeys,
  getBrowserRegistryPayload,
};
