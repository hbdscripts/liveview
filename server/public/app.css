/* Master stylesheet (no inline CSS). */

    :root {
      --converted-bg: #f1f9f8;
      --converted-hover: #edf4f3;
      --returning-bg: #fff;
      --badge-new-fg: #fff;
      --badge-returning: #6366f1;
      --chip-abandoned: #dc2626;
      --side-panel-shadow: -4px 0 24px rgba(0, 0, 0, .08);
      --side-panel-sale-bg: rgba(13, 148, 136, 0.08);
      --button-hover-bg: #f0f0f0;
      --select-arrow: #333;
      /* Table: universal — one gap, one padding, one font stack for all tables at all resolutions */
      --table-gap: 15px;
      --table-cell-padding-y: 0.6rem;
      --table-cell-padding-x: 0.8rem;
      --table-font-size: 12px;
      --table-th-font-size: 13px;
      --table-header-font-size: 14px;
      --table-row-border: 1px solid var(--border);
      --online-dot-color: #4caf50;
      --link-fg: #222;
      --top-bar-divider: #eee;
    }
    /* box-sizing and body font handled by Tabler — no global override needed */
    /* SVG icons: scoped to custom elements only (Tabler manages its own icon colours) */
    .sale-toast svg { color: var(--text); }
    /* Let interactive elements tint icons via their own `color` (hover/active/focus). */
    button:hover svg,
    button:focus-visible svg,
    a:hover svg,
    a:focus-visible svg,
    [role="tab"]:hover svg,
    [role="tab"][aria-selected="true"] svg { color: inherit; }
    .main { padding: 24px; margin: 0 auto; width: 100%; }
    .stats-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--table-gap); margin-bottom: 1.5rem; align-items: start; }
    .stats-row.breakdown-row { grid-template-columns: repeat(2, 1fr); align-items: start; }
    .breakdown-row .by-country-table tr { height: 50px; }
    .breakdown-row .by-country-table .grid-body .grid-row { min-height: 50px; }
    /* Overview tab: 2-col grid */
    #tab-panel-breakdown .stats-row { grid-template-columns: repeat(2, 1fr); }
    /* Products tab: 2-col grid; type tables also 2-col */
    #tab-panel-products .stats-row { grid-template-columns: 1fr 1fr; }
    #tab-panel-ads .stats-row { grid-template-columns: 1fr; }
    .ads-campaign-table { --grid-cols: minmax(160px, 2fr) repeat(6, minmax(64px, 0.7fr)); }
    .ads-campaign-table .ads-totals-row { font-weight: 600; }
    .ads-campaign-table .ads-totals-row .grid-cell { border-bottom: 2px solid #f0f0f0; }
    #products-type-tables-row { grid-template-columns: 1fr 1fr; }
    .traffic-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--table-gap); margin-bottom: 1.5rem; align-items: start; }
    @media (max-width: 768px) { .traffic-grid { grid-template-columns: 1fr; } }
    .stats-card { background: var(--card); padding: 0; border-radius: var(--radius); border: 1px solid var(--border); box-shadow: var(--shadow); min-width: 0; box-sizing: border-box; margin-right: -1px; }
    .stats-card:last-child { margin-right: 0; }
    #stats-country, #stats-best-geo-products, #stats-best-sellers, #stats-worst-products, #stats-best-variants, #stats-worst-variants, #stats-aov { display: flex; flex-direction: column; }
    .traffic-card-header { display: flex; align-items: center; justify-content: space-between; gap: 0.5rem; padding: var(--table-cell-padding-y) var(--table-cell-padding-x); background: var(--th-bg); border-bottom: var(--table-row-border); }
    .traffic-card-title { margin: 0; font-size: var(--table-th-font-size); font-weight: 600; color: var(--muted); text-transform: uppercase; letter-spacing: 0.04em; line-height: 1.4; }
    .traffic-picker-list { display: flex; flex-direction: column; gap: 0.25rem; }
    .traffic-picker-item { display: flex; align-items: center; gap: 0.5rem; padding: 0.15rem 0; font-size: 0.8125rem; }
    .traffic-picker-item input { width: 16px; height: 16px; }
    .traffic-picker-meta { margin-left: auto; font-size: 0.75rem; color: var(--muted); }
    /* Traffic Type: device -> platform expandable tree */
    .traffic-type-toggle { display: inline-flex; align-items: center; gap: 0.35rem; border: none; background: none; padding: 0; margin: 0; cursor: pointer; color: var(--link-fg); font: inherit; font-size: var(--table-font-size); font-weight: 600; }
    .traffic-type-toggle:hover { color: var(--accent); }
    .traffic-type-toggle .chev { width: 12px; height: 12px; display: inline-flex; align-items: center; justify-content: center; color: var(--muted); }
    .traffic-type-toggle .chev::before { content: '▸'; line-height: 1; }
    .traffic-type-toggle[aria-expanded="true"] .chev::before { content: '▾'; }
    .traffic-type-parent .grid-cell:first-child { white-space: nowrap; }
    .traffic-type-child .grid-cell:first-child { padding-left: calc(var(--table-cell-padding-x) + 18px); }
    .traffic-type-child .grid-cell:first-child::before { content: '›'; display: inline-block; margin-right: 6px; color: var(--muted); }
    /* Single thead row: title in first cell, column labels in rest; one line */
    .stats-card .by-country-table thead th { white-space: nowrap; margin: 0; padding: var(--table-cell-padding-y) var(--table-cell-padding-x); font-size: var(--table-th-font-size); font-weight: 600; color: var(--muted); text-transform: uppercase; letter-spacing: 0.04em; line-height: 1.4; text-align: left; background: var(--th-bg); border-bottom: var(--table-row-border); }
    /* When a card already has a header bar, keep only that bar grey (table thead stays white). */
    .stats-card .traffic-card-header + .country-table-wrap .by-country-table thead th { background: var(--card); }
    .stats-section { display: flex; flex-direction: column; gap: 1px; }
    .stats-main { font-size: 1.5rem; font-weight: 700; color: var(--accent); letter-spacing: -0.02em; }
    .stats-breakdown { font-size: 0.8125rem; color: var(--text); display: flex; flex-wrap: wrap; gap: 0.75rem; }
    .stats-breakdown span { display: inline-block; }
    .stats-divider { height: 1px; /* background: var(--border); */ margin: 0.6rem 0; }
    .stats-select { padding: 0.35rem 0.5rem; border: 1px solid var(--border); border-radius: var(--radius); background: var(--card); color: var(--text); font-size: 0.8125rem; }
    .muted { color: var(--muted); font-size: 0.8rem; }
    .country-table-wrap { overflow-y: auto; overflow-x: auto; flex: 1; min-height: 0; margin-bottom: 0; -webkit-overflow-scrolling: touch; }
    /* Breakdown tables: same padding/th style; border only on card so no double border */
    .by-country-table { width: 100%; border-collapse: collapse; font-size: var(--table-font-size); table-layout: fixed; border: 1px solid var(--border); box-shadow: var(--shadow); border-radius: var(--radius); overflow: hidden; }
    .stats-card .by-country-table { border: none; box-shadow: none; }
    .by-country-table th, .by-country-table td { padding: var(--table-cell-padding-y) var(--table-cell-padding-x); border-bottom: none; line-height: 1.4; }
    .by-country-table tr:last-child td { border-bottom: none; }
    .by-country-table tbody tr { box-shadow: none; }
    .by-country-table tbody tr:last-child { box-shadow: none; }
    .by-country-table tbody td { border-bottom: none !important; }
    .stats-card .by-country-table th:first-child, .stats-card .by-country-table td:first-child { padding-left: var(--table-cell-padding-x); padding-right: var(--table-cell-padding-x); min-width: 0; width: 32%; }
    .stats-card .by-country-table th:not(:first-child), .stats-card .by-country-table td:not(:first-child) { text-align: center; min-width: 4rem; white-space: nowrap; }
    .stats-card .by-country-table th:last-child, .stats-card .by-country-table td:last-child { padding-right: var(--table-cell-padding-x); min-width: 5rem; }
    .by-country-table th { font-size: var(--table-th-font-size); color: var(--muted); font-weight: 600; text-transform: uppercase; letter-spacing: 0.04em; background: var(--th-bg); }
    /* Table header abbreviations/icons on small screens (avoid overlaps). */
    .th-label-long { display: inline; }
    .th-label-short { display: none; align-items: center; justify-content: center; gap: 0.25rem; line-height: 1; }
    .th-label-short svg { width: 16px; height: 16px; display: block; }
    @media (max-width: 768px) {
      .th-label-long { display: none; }
      .th-label-short { display: inline-flex; }
      .by-country-table th.th-sort-asc::after,
      .by-country-table th.th-sort-desc::after { margin: -10px 0 0 0; }
    }
    /* First column layout */
    .by-country-table:not(.best-sellers-table) tbody td:first-child { min-width: 0; }
    .by-country-table:not(.best-sellers-table) tbody td:first-child .country-cell { display: flex; align-items: center; gap: 0.6rem; min-width: 0; }
    .by-country-table:not(.best-sellers-table) tbody td:first-child .country-cell > *:first-child { flex-shrink: 0; }
    .by-country-table tbody td:first-child .country-label { flex: 1; min-width: 3em; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    /* Grid-table version */
    .by-country-table:not(.best-sellers-table) .grid-body .grid-cell:first-child { min-width: 0; }
    .by-country-table:not(.best-sellers-table) .grid-body .grid-cell:first-child .country-cell { display: flex; align-items: center; gap: 0.6rem; min-width: 0; }
    .by-country-table:not(.best-sellers-table) .grid-body .grid-cell:first-child .country-cell > *:first-child { flex-shrink: 0; }
    .by-country-table .grid-body .grid-cell:first-child .country-label { flex: 1; min-width: 3em; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    /* Best GEO Products: flag + product thumb only. */
    .geo-products-table tbody td:first-child .country-label { flex: 0 0 auto; white-space: normal; text-overflow: clip; display: inline-flex; align-items: center; margin-left: -20px; border: 2px solid transparent; border-radius: 100px; }
    .geo-products-table tbody tr:nth-child(odd) td:first-child .country-label { background: #ffffff; }
    .geo-products-table tbody tr:nth-child(even) td:first-child .country-label { background: #f8f8f8; }
    .geo-products-table .grid-body .grid-cell:first-child .country-label { flex: 0 0 auto; white-space: normal; text-overflow: clip; display: inline-flex; align-items: center; margin-left: -20px; border: 2px solid transparent; border-radius: 100px; }
    .geo-products-table .grid-body .grid-row:nth-child(odd) .grid-cell:first-child .country-label { background: #ffffff; }
    .geo-products-table .grid-body .grid-row:nth-child(even) .grid-cell:first-child .country-label { background: #f8f8f8; }
    .geo-products-table .geo-product-thumb { width: 32px; height: 32px; overflow: hidden; border: 1px solid var(--border); display: inline-flex; align-items: center; justify-content: center; background: transparent; border-radius: 100px; }
    .geo-products-table .geo-product-thumb img { width: 100%; height: 100%; object-fit: cover; display: block; border-radius: 100px; }
    .geo-products-table .geo-product-thumb-placeholder { width: 100%; height: 100%; background: var(--border); display: block; }
    .by-country-table.aov-table .country-label { overflow: visible; text-overflow: clip; white-space: normal; word-break: break-word; }
    .by-country-table.aov-table { table-layout: fixed; }
    .stats-card .by-country-table.aov-table th:first-child,
    .stats-card .by-country-table.aov-table td:first-child { width: 70%; }
    .stats-card .by-country-table.aov-table th:last-child,
    .stats-card .by-country-table.aov-table td:last-child { width: 30%; min-width: 5.5rem; }
    .by-country-table .country-name { display: inline; }
    .by-country-table .country-code { display: none; }
    .by-country-table .flag-img { width: 26px; height: 20px; object-fit: cover; border-radius: 4px; flex-shrink: 0; }
    .best-sellers-table .bs-product-col { min-width: 200px; width: auto; max-width: none; }
    .stats-card #stats-best-sellers .by-country-table th:first-child,
    .stats-card #stats-best-sellers .by-country-table td:first-child,
    .stats-card #stats-worst-products .by-country-table th:first-child,
    .stats-card #stats-worst-products .by-country-table td:first-child,
    .stats-card #stats-best-variants .by-country-table th:first-child,
    .stats-card #stats-best-variants .by-country-table td:first-child,
    .stats-card #stats-worst-variants .by-country-table th:first-child,
    .stats-card #stats-worst-variants .by-country-table td:first-child { width: 62%; min-width: 220px; }

    /* Product tables: allow numeric cols to shrink so names can breathe. */
    .stats-card .by-country-table.best-sellers-table th:not(:first-child),
    .stats-card .by-country-table.best-sellers-table td:not(:first-child) { min-width: 3.25rem; }
    .stats-card .by-country-table.best-sellers-table th:last-child,
    .stats-card .by-country-table.best-sellers-table td:last-child { min-width: 4rem; }
    /* Product name visibility: keep a stable width so text never collapses to 0 on wide screens. */
    .best-sellers-table .product-cell { display: flex; align-items: center; gap: 0.6rem; min-width: 0; width: 100%; }
    .best-sellers-table .product-cell a { display: inline-block; text-decoration: none; flex-shrink: 0; }
    /* Product thumbnails: shared styling (prevents "thin line" aspect ratios). */
    .bs-thumb, .landing-thumb { border-radius: 8px; object-fit: cover; object-position: center; flex-shrink: 0; display: block; }
    .best-sellers-table .product-cell .bs-thumb { width: 36px; height: 36px; min-width: 36px; min-height: 36px; border: 2px solid #fff; box-shadow: 0 1px 3px rgba(0,0,0,.12); }
    .best-sellers-table .product-cell .bs-name {
      flex: 1;
      min-width: 0;
      overflow: hidden;
      display: block;
      white-space: nowrap;
      text-overflow: ellipsis;
      line-height: 1.2;
      font-weight: 400;
      font-size: var(--table-font-size);
    }
    .best-sellers-table .thumb-wrap { width: 36px; height: 36px; }
    .best-sellers-table .bs-thumb-placeholder { position: absolute; inset: 0; width: 36px; height: 36px; background: var(--border); border-radius: 8px; border: 2px solid #fff; box-shadow: 0 1px 3px rgba(0,0,0,.12); }
    .best-sellers-table .product-cell .bs-thumb { position: absolute; inset: 0; }
    .by-country-table th.sortable { cursor: pointer; user-select: none; }
    .by-country-table th.sortable:hover { color: var(--accent); }
    .by-country-table th.th-sort-asc::after,
    .by-country-table th.th-sort-desc::after { content: ''; display: inline-block; width: 16px; height: 16px; margin-left: 1px; vertical-align: middle; background-color: currentColor; -webkit-mask-size: contain; -webkit-mask-repeat: no-repeat; -webkit-mask-position: center; mask-size: contain; mask-repeat: no-repeat; mask-position: center; }
    .by-country-table th.th-sort-asc::after { -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 14.5L12 9.5L17 14.5' stroke='black' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'/%3E%3C/svg%3E"); mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 14.5L12 9.5L17 14.5' stroke='black' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'/%3E%3C/svg%3E"); }
    .by-country-table th.th-sort-desc::after { -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M17 9.5L12 14.5L7 9.5' stroke='black' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'/%3E%3C/svg%3E"); mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M17 9.5L12 14.5L7 9.5' stroke='black' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'/%3E%3C/svg%3E"); }

    /* Medium screens */
    @media (max-width: 1200px) {
      .aov-cards-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      /* Keep Finishes on one row for desktop/laptop widths; only break on smaller screens below. */
      #finishes-cards-grid[data-cards-view="finishes"] { grid-template-columns: repeat(4, minmax(0, 1fr)); }
      .stats-card #stats-best-sellers .by-country-table th:first-child,
      .stats-card #stats-best-sellers .by-country-table td:first-child,
      .stats-card #stats-worst-products .by-country-table th:first-child,
      .stats-card #stats-worst-products .by-country-table td:first-child,
      .stats-card #stats-best-variants .by-country-table th:first-child,
      .stats-card #stats-best-variants .by-country-table td:first-child,
      .stats-card #stats-worst-variants .by-country-table th:first-child,
      .stats-card #stats-worst-variants .by-country-table td:first-child { width: 58%; min-width: 200px; }

      .stats-card .by-country-table.best-sellers-table th:not(:first-child),
      .stats-card .by-country-table.best-sellers-table td:not(:first-child) { min-width: 3rem; }
      .stats-card .by-country-table.best-sellers-table th:last-child,
      .stats-card .by-country-table.best-sellers-table td:last-child { min-width: 3.6rem; }
    }
    .aov-cards-wrap { margin-bottom: 1rem; }
    .aov-cards-header { display: flex; align-items: center; justify-content: space-between; gap: 0.75rem; margin-bottom: 0.5rem; }
    .aov-cards-title { font-size: var(--table-header-font-size); font-weight: 600; color: var(--text); }
    .aov-cards-title-dropdown { position: relative; display: inline-flex; align-items: center; }
    .aov-cards-title-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0;
      border: none;
      background: none;
      cursor: pointer;
      font-family: inherit;
    }
    .aov-cards-title-btn:hover { color: var(--accent); }
    .aov-cards-title-btn:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; border-radius: 10px; }
    .aov-cards-title-chevron { width: 16px; height: 16px; display: block; flex-shrink: 0; opacity: 0.75; transition: transform 0.14s ease, opacity 0.14s ease; }
    .aov-cards-title-btn[aria-expanded="true"] .aov-cards-title-chevron { transform: rotate(180deg); opacity: 1; }
    .aov-cards-title-menu { display: none; position: absolute; left: 0; top: calc(100% + 6px); background: var(--card); border: 1px solid var(--border); border-radius: 12px; box-shadow: var(--shadow); padding: 0.25rem; z-index: 60; min-width: 160px; }
    .aov-cards-title-menu.open { display: block; }
    .aov-cards-title-option { width: 100%; text-align: left; padding: 0.55rem 0.75rem; border: none; background: none; cursor: pointer; font-size: 0.875rem; color: var(--text); border-radius: 10px; font-family: inherit; font-weight: 650; }
    .aov-cards-title-option:hover { background: var(--row-hover); }
    .aov-cards-title-option[aria-current="true"] { background: rgba(13, 148, 136, 0.12); color: var(--accent); }
    .aov-cards-grid { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: var(--table-gap); }

    /* Card grids: frame + internal dividers (table-like, no gaps/shadows). */
    #aov-cards-grid,
    #leaderboard-cards-grid,
    #finishes-cards-grid,
    #breakdown-title-grid,
    #breakdown-type-grid,
    #breakdown-finish-grid,
    #breakdown-length-grid {
      position: relative;
      gap: 0;
      border-radius: var(--radius);
      overflow: hidden;
      background: var(--card);
      box-shadow: var(--shadow);
    }
    #aov-cards-grid::after,
    #leaderboard-cards-grid::after,
    #finishes-cards-grid::after,
    #breakdown-title-grid::after,
    #breakdown-type-grid::after,
    #breakdown-finish-grid::after,
    #breakdown-length-grid::after {
      content: '';
      position: absolute;
      inset: 0;
      border: 1px solid var(--border);
      border-radius: inherit;
      pointer-events: none;
      z-index: 2;
    }
    #aov-cards-grid .aov-card,
    #leaderboard-cards-grid .aov-card,
    #finishes-cards-grid .aov-card,
    #breakdown-title-grid .aov-card,
    #breakdown-type-grid .aov-card,
    #breakdown-finish-grid .aov-card,
    #breakdown-length-grid .aov-card {
      border: 0;
      border-radius: 0;
      box-shadow: inset -1px 0 0 var(--border), inset 0 -1px 0 var(--border);
      background: transparent;
      position: relative;
      z-index: 1;
    }

    #finishes-cards-grid[data-cards-view="finishes"] { grid-template-columns: repeat(4, minmax(0, 1fr)); }
    #finishes-cards-grid[data-cards-view="lengths"] { grid-template-columns: repeat(5, minmax(0, 1fr)); }
    @media (max-width: 980px) {
      #finishes-cards-grid[data-cards-view="finishes"] { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      #finishes-cards-grid[data-cards-view="lengths"] { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    }
    .aov-card { padding: 0.6rem 0.8rem; box-shadow: 2px 2px 2px #eee; display: flex; align-items: center; justify-content: space-between; gap: 0.6rem; min-width: 0; background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); }
    .aov-card-left { display: inline-flex; align-items: center; gap: 0.5rem; min-width: 0; }
    .aov-card-name { font-size: 0.85rem; font-weight: 500; color: var(--text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .aov-card-value { font-size: 0.9rem; font-weight: 600; color: var(--text); white-space: nowrap; display: inline-flex; align-items: center; gap: 0.4rem; }
    .aov-card-cr-pill {
      display: inline-flex;
      align-items: center;
      padding: 0.14rem 0.45rem;
      border-radius: 999px;
      font-size: 0.72rem;
      font-weight: 700;
      line-height: 1;
      white-space: nowrap;
      background: rgba(13, 148, 136, 0.12);
      border: 1px solid rgba(13, 148, 136, 0.25);
      color: #0f766e;
    }
    .aov-card-empty { justify-content: center; color: var(--muted); }

    /* Products → Finishes cards */
    .finish-icon {
      width: 28px;
      height: 28px;
      border-radius: 4px;
      border: 1px solid rgba(0, 0, 0, 0.08);
      display: inline-block;
      flex-shrink: 0;
      box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 0.55),
        0 2px 6px rgba(0, 0, 0, 0.06);
    }
    .finish-icon-gold { background: linear-gradient(135deg, #f6d365 0%, #fda085 100%); }
    .finish-icon-silver { background: linear-gradient(135deg, #f8fafc 0%, #94a3b8 100%); }
    .finish-icon-vermeil { background: linear-gradient(135deg, #ffddb5 0%, #b45309 100%); }
    .finish-icon-solid-silver { background: linear-gradient(135deg, #e2e8f0 0%, #475569 100%); }

    /* Products → Lengths cards */
    .length-icon {
      border-radius: 2px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      font-weight: 500;
      color: #0d9488;
      padding: 0;
    }
    .length-icon-text { font-size: 16px; line-height: 1; }

    /* Products → Leaderboard cards */
    #leaderboard-cards-grid[data-leaderboard-view="title"] { grid-template-columns: repeat(6, minmax(0, 1fr)); }
    #leaderboard-cards-grid[data-leaderboard-view="type"] { grid-template-columns: repeat(4, minmax(0, 1fr)); }
    @media (max-width: 980px) {
      #leaderboard-cards-grid[data-leaderboard-view="title"] { grid-template-columns: repeat(4, minmax(0, 1fr)); }
      #leaderboard-cards-grid[data-leaderboard-view="type"] { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }
    @media (max-width: 768px) {
      #leaderboard-cards-grid[data-leaderboard-view="title"] { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      #leaderboard-cards-grid[data-leaderboard-view="type"] { grid-template-columns: 1fr; }
    }
    .aov-card--leaderboard .aov-card-value-main { color: #0d9488; }
    .leaderboard-thumb-link { display: inline-flex; align-items: center; justify-content: center; text-decoration: none; flex-shrink: 0; }
    .leaderboard-thumb-link:focus-visible { outline: 2px solid rgba(13, 148, 136, 0.55); outline-offset: 2px; border-radius: 12px; }
    .leaderboard-thumb-link:hover .leaderboard-thumb-wrap { border-color: rgba(13, 148, 136, 0.35); }
    .leaderboard-thumb-wrap {
      position: relative;
      width: 34px;
      height: 34px;
      border-radius: 10px;
      overflow: hidden;
      flex-shrink: 0;
      border: 1px solid rgba(15, 23, 42, 0.12);
      background: rgba(15, 23, 42, 0.04);
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.55);
    }
    .leaderboard-thumb-placeholder {
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.08) 0%, rgba(15, 23, 42, 0.02) 100%);
    }
    .leaderboard-thumb {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    .leaderboard-thumb.is-hidden { display: none; }
    .leaderboard-type-name { font-weight: 500; font-size: 0.9rem; letter-spacing: -0.01em; }

    /* Breakdown tab: grid columns for each card */
    #breakdown-title-grid { grid-template-columns: repeat(6, minmax(0, 1fr)); }
    #breakdown-type-grid { grid-template-columns: repeat(4, minmax(0, 1fr)); }
    #breakdown-finish-grid { grid-template-columns: repeat(4, minmax(0, 1fr)); }
    #breakdown-length-grid { grid-template-columns: repeat(5, minmax(0, 1fr)); }
    @media (max-width: 980px) {
      #breakdown-title-grid { grid-template-columns: repeat(4, minmax(0, 1fr)); }
      #breakdown-type-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      #breakdown-finish-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      #breakdown-length-grid { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    }
    @media (max-width: 768px) {
      #breakdown-title-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      #breakdown-type-grid { grid-template-columns: 1fr; }
      #breakdown-finish-grid { grid-template-columns: 1fr; }
      #breakdown-length-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }

    /* Div/Grid "tables" (no <table>, no <tr>, no <td>) */
    .grid-table { width: 100%; background: var(--card); border-radius: var(--radius); border: 1px solid var(--border); box-shadow: var(--shadow); overflow: hidden; }
    .grid-header, .grid-body { display: block; }
    .grid-row { display: grid; grid-template-columns: var(--grid-cols, 1fr); align-items: center; gap: 0; }
    .grid-cell { padding: var(--table-cell-padding-y) var(--table-cell-padding-x); text-align: left; vertical-align: middle; font-size: var(--table-font-size); line-height: 1.4; min-width: 0; }
    .grid-cell.span-all { grid-column: 1 / -1; }

    .grid-row--header { border-bottom: 1px solid #f0f0f0; }
    .grid-row--header .grid-cell { background: #fff; font-size: var(--table-th-font-size); color: var(--muted); font-weight: 600; text-transform: uppercase; letter-spacing: 0.04em; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

    .grid-body .grid-row:nth-child(odd) { background: #ffffff; }
    .grid-body .grid-row:nth-child(even) { background: #f8f8f8; }
    .grid-body .grid-row:hover { background: var(--row-hover); }

    .grid-row.clickable { cursor: pointer; }

    /* Session row states */
    .grid-row.returning { background: var(--returning-bg); }
    .grid-row.converted { background: var(--converted-hover); }
    .grid-row.converted:hover { background: var(--converted-hover); }
    .grid-row.converted .grid-cell:nth-child(2) { box-shadow: inset 3px 0 0 #0d9488, inset 4px 0 0 #fff; }
    #sessions-table.grid-table .grid-cell.sale-icon-cell {
      padding: 0 !important;
      text-align: center;
      vertical-align: middle !important;
    }
    #sessions-table.grid-table .grid-cell.sale-icon-cell.converted-sale-cell {
      background: var(--kexo-converted-icon-bg, #f0f8f1) !important;
    }
    #sessions-table.grid-table .grid-cell.sale-icon-cell .converted-row-sale-icon {
      color: var(--kexo-converted-icon-color, #2f7d50);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      font-size: .85rem;
    }
    .table-scroll-wrap .grid-body .grid-row .grid-cell:first-child { background: var(--kexo-sticky-cell-bg, #fff) !important; }

    /* Column alignment: keep first column left, rest centered */
    .grid-table .grid-cell:not(:first-child) { text-align: center; }

    /* Sort indicators (uses existing th-sort-asc/desc classes) */
    .grid-row--header .grid-cell.sortable { cursor: pointer; user-select: none; }
    .grid-row--header .grid-cell.sortable:hover { color: var(--accent); }
    .grid-row--header .grid-cell.th-sort-asc::after,
    .grid-row--header .grid-cell.th-sort-desc::after { content: ''; display: inline-block; width: 16px; height: 16px; margin-left: 6px; vertical-align: middle; background-color: currentColor; -webkit-mask-size: contain; -webkit-mask-repeat: no-repeat; -webkit-mask-position: center; mask-size: contain; mask-repeat: no-repeat; mask-position: center; }
    .grid-row--header .grid-cell.th-sort-asc::after { -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 14.5L12 9.5L17 14.5' stroke='black' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'/%3E%3C/svg%3E"); mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 14.5L12 9.5L17 14.5' stroke='black' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'/%3E%3C/svg%3E"); }
    .grid-row--header .grid-cell.th-sort-desc::after { -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M17 9.5L12 14.5L7 9.5' stroke='black' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'/%3E%3C/svg%3E"); mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M17 9.5L12 14.5L7 9.5' stroke='black' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'/%3E%3C/svg%3E"); }

    /* Sessions table column sizing + scroll wrapper */
    .sessions-table { --grid-cols: minmax(240px, 2.2fr) minmax(72px, 0.7fr) minmax(110px, 0.9fr) minmax(90px, 0.9fr) minmax(90px, 0.7fr) minmax(90px, 0.7fr) minmax(90px, 0.7fr) minmax(120px, 0.8fr); }
    #sessions-table .grid-body .grid-row { background: #ffffff; }
    #sessions-table .grid-body .grid-row.converted { background: var(--converted-hover); }
    #sessions-table .grid-body .grid-row.converted:hover { background: var(--converted-hover); }
    .table-scroll-wrap .grid-table { border: none; box-shadow: none; border-radius: 0; min-width: 640px; }

    /* Breakdown/product/traffic tables */
    .by-country-table { --grid-cols: minmax(180px, 1.4fr) repeat(4, minmax(64px, 0.65fr)); }
    .traffic-card-header + .country-table-wrap .grid-row--header .grid-cell { background: #fff; }

    /* Breakdown tab: override column counts so 2/3/4-col tables don't reserve space for 5-col layouts. */
    #breakdown-aov-table { --grid-cols: minmax(180px, 1.4fr) repeat(3, minmax(64px, 0.65fr)); }
    #breakdown-product-table,
    #breakdown-type-table,
    #breakdown-finish-table,
    #breakdown-length-table,
    #breakdown-chainstyle-table { --grid-cols: minmax(180px, 1.4fr) repeat(2, minmax(64px, 0.65fr)); }

    /* Breakdown: first-column icon + label layout (SVG or gradient swatches). */
    #breakdown-product-table .grid-body .grid-cell:first-child,
    #breakdown-type-table .grid-body .grid-cell:first-child,
    #breakdown-finish-table .grid-body .grid-cell:first-child,
    #breakdown-length-table .grid-body .grid-cell:first-child,
    #breakdown-chainstyle-table .grid-body .grid-cell:first-child { min-width: 0; }
    #breakdown-product-table .breakdown-cell,
    #breakdown-type-table .breakdown-cell,
    #breakdown-finish-table .breakdown-cell,
    #breakdown-length-table .breakdown-cell,
    #breakdown-chainstyle-table .breakdown-cell { display: flex; align-items: center; gap: 0.6rem; min-width: 0; }
    #breakdown-product-table .breakdown-cell > *:first-child,
    #breakdown-type-table .breakdown-cell > *:first-child,
    #breakdown-finish-table .breakdown-cell > *:first-child,
    #breakdown-length-table .breakdown-cell > *:first-child,
    #breakdown-chainstyle-table .breakdown-cell > *:first-child { flex-shrink: 0; }
    #breakdown-product-table .breakdown-label,
    #breakdown-type-table .breakdown-label,
    #breakdown-finish-table .breakdown-label,
    #breakdown-length-table .breakdown-label,
    #breakdown-chainstyle-table .breakdown-label { flex: 1; min-width: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

    /* Breakdown: product thumb + name */
    #breakdown-product-table .breakdown-thumb-wrap {
      width: 28px;
      height: 28px;
      border-radius: 100%;
      overflow: hidden;
      border: 1px solid rgba(15, 23, 42, 0.12);
      background: rgba(15, 23, 42, 0.04);
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    #breakdown-product-table .breakdown-thumb {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    #breakdown-product-table .breakdown-thumb-wrap svg { width: 18px; height: 18px; color: rgba(15, 23, 42, 0.55); }
    #breakdown-product-table .breakdown-product-name {
      display: inline-block;
      max-width: 120px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    @media (max-width: 768px) {
      #breakdown-product-table .breakdown-product-name { display: none; }
    }

    /* Breakdown: generic SVG icon pill */
    .breakdown-icon {
      width: 28px;
      height: 28px;
      border-radius: 8px;
      border: 1px solid rgba(15, 23, 42, 0.12);
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.08) 0%, rgba(15, 23, 42, 0.02) 100%);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }
    .breakdown-icon svg { width: 16px; height: 16px; color: rgba(15, 23, 42, 0.65); }

    /* Scoped table styles — only for legacy non-Tabler tables (grid-table handled by tabler-theme.css) */
    .sessions-table-wrap table { width: 100%; border-collapse: collapse; }
    .sessions-table-wrap th, .sessions-table-wrap td { padding: var(--table-cell-padding-y) var(--table-cell-padding-x); text-align: left; border-bottom: none; vertical-align: middle; font-size: var(--table-font-size); line-height: 1.4; }
    .sessions-table-wrap tr:last-child td { border-bottom: none; }
    .sessions-table-wrap th:not(:first-child), .sessions-table-wrap td:not(:first-child) { text-align: center; }
    .sessions-table-wrap th { background: var(--th-bg); font-size: var(--table-th-font-size); color: var(--muted); font-weight: 600; text-transform: uppercase; letter-spacing: 0.04em; }
    .sessions-table-wrap th:first-child, .sessions-table-wrap td:first-child { min-width: 80px; padding-left: var(--table-cell-padding-x); }
    .sessions-table-wrap tr:hover { background: inherit; }
    tr.returning { background: var(--returning-bg); }
    tr.returning td { background: var(--returning-bg); }
    tr.converted { background: var(--converted-bg); }
    tr.converted td { background: #f1f9f8 !important; }
    tr.converted td:first-child { background: #f1f9f8 !important; box-shadow: inset 3px 0 0 #0d9488, inset 4px 0 0 #fff; }
    tr.converted:hover { background: var(--converted-bg); }
    .rev-decimal { font-size: 0.75em; opacity: 0.7; vertical-align: top; }
    tr.converted td { font-weight: 500; }
    tr.clickable { cursor: pointer; }
    .flag-cell { white-space: nowrap; }
    .arrived-cell, .last-seen-cell { font-size: var(--table-font-size); white-space: nowrap; }
    .flag-img { width: 26px; height: 20px; object-fit: cover; border-radius: 4px; margin-right: 0.35rem; vertical-align: middle; display: inline-block; }
    .last-action-cell { display: flex; align-items: center; gap: 0.5rem; }
    .last-action-cell a { color: var(--link-fg); text-decoration: none; font-size: var(--table-font-size); font-weight: 400; }
    .last-action-cell a:hover { text-decoration: underline; }
    .last-action-cell.dual { align-items: center; }
    .last-action-cell .landing-lines { display: flex; flex-direction: column; /* gap: 0.15rem; */ min-width: 0; margin: 0; }
    .last-action-cell .landing-lines > * { min-width: 0; }
    .last-action-cell .landing-line { display: grid; grid-template-columns: 14px minmax(0, 1fr); align-items: center; gap: 0.35rem 0; font-size: var(--table-font-size); font-weight: 500; line-height: 1.15; color: var(--link-fg); }
    .last-action-cell .landing-line-text { min-width: 0; word-break: break-word; }
    .last-action-cell .landing-dir-icon { width: 14px; height: 14px; flex-shrink: 0; margin-right: 0.35rem; display: inline-block; }
    .last-action-cell .landing-dir-icon-entry { color: #0d9488; }
    .last-action-cell .landing-dir-icon-exit { color: #940d0d; }
    .last-action-cell .landing-line:hover { text-decoration: underline; }
    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }
    .landing-fallback-hint { font-size: 0.75rem; color: var(--muted); font-weight: normal; }
    .landing-thumb { width: 50px; height: 50px; min-width: 50px; min-height: 50px; }
    .table-scroll-wrap .last-action-cell .landing-thumb { width: 50px; height: 50px; min-width: 50px; min-height: 50px; border: 1px solid #e1e1e1; padding: 3px; }
    .thumb-wrap { position: relative; display: inline-block; flex-shrink: 0; }
    /* Stacked entry/exit thumbnails: overlapping squares (not 50/50 circles). */
    .thumb-wrap.thumb-stack { display: inline-block; position: relative; width: 62px; height: 62px; }
    .thumb-wrap.thumb-stack .landing-thumb { position: absolute; inset: auto; width: 44px; height: 44px; min-width: 44px; min-height: 44px; border-radius: 8px; border: 2px solid #fff; box-shadow: 0 1px 3px rgba(0,0,0,.12); background: #fff; }
    .thumb-wrap.thumb-stack .landing-thumb:first-child { top: 0; left: 0; z-index: 1; }
    .thumb-wrap.thumb-stack .landing-thumb-exit { width: 36px; height: 36px; min-width: 36px; min-height: 36px; bottom: 0; right: 0; z-index: 2; }
    /* Ensure stack thumbs aren't affected by generic table thumb padding/borders */
    .table-scroll-wrap .thumb-wrap.thumb-stack .landing-thumb { padding: 0; box-sizing: border-box; border: 2px solid #fff; }

    .thumb-overlay {
        display: none !important;
    }

    .thumb-overlay img,
    .thumb-overlay svg {
        width: 25px;
        height: 25px;
        display: block;
        padding: 2px;
        position: relative;
    }
    .thumb-overlay svg { color: var(--accent); }
    .table-title { font-size: var(--table-header-font-size); font-weight: 600; color: var(--text); margin-bottom: 0.5rem; }
    .badge { display: inline-block; padding: 0.15rem 0.4rem; border-radius: var(--tblr-border-radius, var(--radius)); font-size: 0.75rem; }
    .badge.new { background: var(--tblr-primary, var(--accent)); color: #fff; }
    .badge.returning { background: var(--badge-returning); color: #fff; }
    .chip { display: inline-block; padding: 0.1rem 0.35rem; border-radius: var(--tblr-border-radius, var(--radius)); font-size: 0.7rem; margin-right: 0.25rem; }
    .chip.checking-out { background: var(--tblr-primary, var(--accent)); color: #fff; }
    .chip.abandoned { background: var(--chip-abandoned); color: #fff; }
    .side-panel { position: fixed; top: 0; right: 0; width: 400px; max-width: 100%; height: 100%; background: var(--card); border-left: 1px solid var(--border); box-shadow: var(--side-panel-shadow); overflow-y: auto; z-index: 10; padding: 1.5rem; }
    .side-panel-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border); }
    .side-panel-title { margin: 0; font-size: 1.125rem; font-weight: 600; color: var(--text); letter-spacing: -0.02em; }

    .side-panel-close { display: inline-flex; align-items: center; justify-content: center; width: 36px; height: 36px; padding: 0; border: none; border-radius: var(--radius); background: transparent; color: var(--muted); cursor: pointer; }
    .side-panel-close:hover { color: var(--text); background: rgba(0,0,0,0.06); }
    .side-panel-close i { font-size: 20px; line-height: 1; }
    .side-panel-section { margin-bottom: 1.5rem; }
    .side-panel-section:last-child { margin-bottom: 0; }
    .side-panel-section-title { display: flex; align-items: center; gap: 0.5rem; margin: 0 0 0.5rem; font-size: 0.6875rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.06em; color: var(--muted); }
    .side-panel-icon { font-size: 16px; line-height: 1; flex-shrink: 0; }
    .side-panel-events { list-style: none; padding: 0; margin: 0; font-size: 0.8125rem; line-height: 1.45; }
    .side-panel-events li { display: flex; align-items: center; gap: 0.625rem; padding: 0.5rem 0; border-bottom: 1px solid var(--border); }
    .side-panel-events li:last-child { border-bottom: none; }
    .side-panel-events li .landing-thumb { flex-shrink: 0; }
    .side-panel-events li > span:last-child { flex: 1; min-width: 0; word-break: break-word; color: var(--text); }
    .side-panel-events li.muted { color: var(--muted); }
    .side-panel-meta { font-size: 0.8125rem; line-height: 1.5; }
    .side-panel-detail-row { display: flex; flex-wrap: wrap; gap: 0.25rem 0.5rem; padding: 0.375rem 0; border-bottom: 1px solid var(--border); }
    .side-panel-detail-row:last-child { border-bottom: none; }
    .side-panel-detail-row .side-panel-label { font-weight: 500; color: var(--muted); min-width: 5rem; }
    .side-panel-detail-row .side-panel-value { color: var(--text); word-break: break-word; }
    .side-panel-hint { margin-top: 0.5rem; font-size: 0.8em; }
    .side-panel-sale { margin-top: 0.75rem; padding: 0.875rem; background: var(--side-panel-sale-bg); border-radius: var(--radius); border-left: 3px solid var(--accent); font-size: 0.8125rem; line-height: 1.5; color: var(--text); }
    .side-panel-sale strong { color: var(--accent); font-weight: 600; }
    .side-panel-source { font-size: 0.8125rem; color: var(--text); word-break: break-all; white-space: pre-wrap; line-height: 1.5; }
    .side-panel-cf { font-size: 0.8125rem; line-height: 1.5; }
    .side-panel-cf-block { margin-bottom: 0.75rem; }
    .side-panel-cf-block:last-child { margin-bottom: 0; }
    .side-panel-cf-subtitle { margin: 0 0 0.25rem; font-size: 0.6875rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: var(--muted); }
    .side-panel-cf .cf-row { padding: 0.25rem 0; word-break: break-word; color: var(--text); }
    .side-panel-cf .cf-row.empty { color: var(--muted); }
    .side-panel-cf .cf-row strong { font-weight: 500; color: var(--muted); margin-right: 0.35rem; }
    .empty { padding: 1.5rem 1rem; color: var(--muted); font-size: var(--table-font-size); }
    .consent-debug { font-size: 0.75rem; color: var(--muted); max-width: 200px; overflow: hidden; text-overflow: ellipsis; }
    .dashboard-top-bar { display: flex; align-items: center; justify-content: space-between; padding: 10px 24px 0; margin: 0 auto; width: 100%; box-sizing: border-box; }
    .mobile-brand-logo { display: none; width: 100%; justify-content: center; pointer-events: none; }
    .mobile-brand-logo img { width: 80px; height: auto; display: block; }
    .next-update-timer {
      --progress: 0;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: conic-gradient(#0d9488 calc(var(--progress) * 1turn), rgba(13, 148, 136, 0.2) 0);
    }
    .server-time-block { font-size: 0.8125rem; color: var(--muted); white-space: nowrap; margin: 0 5px 0 0; }
    .server-time-tz { font-size: 0.7rem; opacity: 0.9; margin-left: 0.2rem; }
    .top-bar-divider { width: 1px; height: 1.2em; background: var(--top-bar-divider); flex-shrink: 0; }
    .refresh-btn { display: inline-flex; align-items: center; justify-content: center; width: 15px; height: 15px; padding: 0; border: none; background: none; cursor: pointer; color: var(--text); }
    .refresh-btn:hover { color: var(--accent); }
    .refresh-btn:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
    .refresh-btn svg { width: 15px; height: 15px; }
    .refresh-btn.spinning svg { animation: refresh-spin 0.8s linear; }
    @keyframes refresh-spin { to { transform: rotate(360deg); } }
    .top-bar-date-select { padding: 0.35rem 1.5rem 0.35rem 0.5rem; border: none; background: none; font-size: 0.875rem; font-weight: 500; color: var(--text); cursor: pointer; font-family: inherit; appearance: none; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M17 9.5L12 14.5L7 9.5' stroke='%23666' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 0.25rem center; background-size: 16px 16px; border-radius: var(--radius); }
    .top-bar-date-select:hover { color: var(--accent); }
    .top-bar-date-select:focus { outline: none; color: var(--accent); }
    .top-bar-date-select option { color: var(--text); background: var(--card); }
    .next-update-block { display: inline-flex; align-items: center; gap: 0.35rem; font-size: 0.875rem; color: var(--muted); }
    .next-update-live-indicator { display: inline-flex; align-items: center; gap: 0.35rem; }
    .live-pulse-dot { width: 10px; height: 10px; border-radius: 50%; background: var(--online-dot-color); animation: live-pulse 1.2s ease-in-out infinite; }
    @keyframes live-pulse { 0% { transform: scale(0.85); opacity: 0.75; } 50% { transform: scale(1); opacity: 1; } 100% { transform: scale(0.85); opacity: 0.75; } }
    .table-loading-overlay { position: absolute; inset: 0; background: rgba(255,255,255,0.7); display: flex; align-items: center; justify-content: center; border-radius: var(--radius); z-index: 2; }
    .table-loading-overlay .spinner,
    .report-build-wrap .spinner,
    .inline-spinner {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: conic-gradient(from 0deg,
        var(--kexo-accent-1, #4b94e4) 0deg 72deg,
        var(--kexo-accent-2, #3eb3ab) 72deg 144deg,
        var(--kexo-accent-3, #f59e34) 144deg 216deg,
        var(--kexo-accent-4, #8b5cf6) 216deg 288deg,
        var(--kexo-accent-5, #ef4444) 288deg 360deg
      );
      -webkit-mask: radial-gradient(farthest-side, transparent calc(100% - 3.5px), #000 calc(100% - 3px));
      mask: radial-gradient(farthest-side, transparent calc(100% - 3.5px), #000 calc(100% - 3px));
      animation: modern-spin 0.9s linear infinite;
      display: inline-block;
    }
    @keyframes modern-spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    .table-loading-overlay.report-loading-overlay {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, 0.95);
      z-index: 200;
      pointer-events: none;
    }
    .table-loading-overlay.report-loading-overlay .report-build-wrap {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .table-loading-overlay.report-loading-overlay .report-build-wrap { padding: 0.9rem 1rem; gap: 0.25rem; }
    @media (max-width: 768px) {
      .table-loading-overlay.report-loading-overlay { top: 50%; }
    }
    .report-loading-overlay { background: transparent; z-index: 80; }
    .report-build-wrap { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 0.35rem; padding: 1rem; text-align: center; }
    .report-build-title { font-size: 0.95rem; font-weight: 700; color: var(--accent); letter-spacing: -0.1px; }
    .report-build-step { font-size: 0.85rem; color: var(--muted); min-height: 1.2em; }
    /* Tab switch: Home (main table) vs Breakdown (cards); date range shared on same row */
    .main-tabs { display: flex; align-items: stretch; gap: 0; margin-bottom: 1rem; border-bottom: 1px solid var(--border); position: relative; }
    .main-tabs [role="tab"] { display: inline-flex; align-items: center; gap: 0.35rem; padding: 0.5rem 1rem; font-size: 0.875rem; font-weight: 500; color: var(--muted); background: none; border: none; border-bottom: 2px solid transparent; margin-bottom: -1px; cursor: pointer; font-family: inherit; }
    .main-tabs [role="tab"]:hover { color: var(--text); }
    .main-tabs [role="tab"][aria-selected="true"] { color: var(--accent); border-bottom-color: var(--accent); }
    .main-tabs [role="tab"] .tab-icon { width: 16px; height: 16px; display: inline-block; vertical-align: middle; }
    .main-tabs [role="tab"] .tab-icon-home { width: 25px; height: 25px; object-fit: contain; }
    .main-tabs [role="tab"] .tab-icon-home-swap { position: relative; width: 25px; height: 25px; display: inline-block; flex-shrink: 0; }
    .main-tabs [role="tab"] .tab-icon-home-swap img { position: absolute; inset: 0; width: 25px; height: 25px; object-fit: contain; display: block; }
    #tab-dashboard .tab-icon-home--inactive { opacity: 1; }
    #tab-dashboard .tab-icon-home--active { opacity: 0; }
    #tab-dashboard[aria-selected="true"] .tab-icon-home--inactive { opacity: 0; }
    #tab-dashboard[aria-selected="true"] .tab-icon-home--active { opacity: 1; }
    .main-tabs [role="tab"] .tab-text { display: inline; }
    @media (min-width: 769px) { #tab-dashboard .tab-text { display: none; } }
    .main-tabs-center-logo { display: none; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); pointer-events: none; z-index: 2; }
    .main-tabs-center-logo img { width: 30px; height: 30px; margin: 0 0 10px; display: block; object-fit: contain; }
    .main-tabs-spacer { flex: 1; min-width: 0; }
    .main-tabs-date-select { padding: 0.35rem 1.5rem 0.35rem 0.5rem; width: 100px; border: none; background: none; font-size: 0.875rem; font-weight: 500; color: var(--text); cursor: pointer; font-family: inherit; appearance: none; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M17 9.5L12 14.5L7 9.5' stroke='%23666' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 0.25rem center; background-size: 16px 16px; border-radius: var(--radius); margin-bottom: -1px; }
    .main-tabs-date-select:hover { color: var(--accent); }
    .main-tabs-date-select:focus { outline: none; color: var(--accent); }
    .main-tabs-date-select option { color: var(--text); background: var(--card); }
    .mobile-date-btn {
        display: none;
        align-items: center;
        justify-content: space-between;
        gap: 0.45rem;
        padding: 10px 0;
        border: none;
        border-radius: var(--radius);
        background: none;
        cursor: pointer;
        color: var(--text);
        font-size: 0.875rem;
        font-weight: 500;
        max-width: 55px;
        width: 55px;
        flex: 0 0 auto;
    }
    .mobile-date-btn:hover { color: var(--accent); }
    .mobile-date-btn svg { width: 18px; height: 18px; display: block; flex-shrink: 0; }
    .mobile-date-menu { display: none; position: absolute; right: 0; top: calc(100% + 6px); background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow); padding: 0.25rem; z-index: 50; min-width: 160px; }
    .mobile-date-menu.open { display: block; }
    .mobile-date-item { width: 100%; text-align: left; padding: 0.5rem 0.75rem; border: none; background: none; cursor: pointer; font-size: 0.875rem; color: var(--text); border-radius: var(--radius); font-family: inherit; }
    .mobile-date-item:hover { background: var(--row-hover); }
    .mobile-date-item[aria-current="true"] { background: rgba(13, 148, 136, 0.12); color: var(--accent); }
    .mobile-tabs-btn {
        display: none;
        align-items: center;
        gap: 0.5rem;
        padding: 10px 0;
        border: none;
        border-radius: var(--radius);
        background: none;
        cursor: pointer;
        color: var(--text);
        font-size: 0.875rem;
        font-weight: 500;
    }
    .mobile-tabs-btn:hover { color: var(--accent); }
    .mobile-tabs-btn svg { width: 18px; height: 18px; display: block; }
    .mobile-tabs-menu { display: none; position: absolute; left: 0; top: calc(100% + 6px); background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow); padding: 0.25rem; z-index: 50; min-width: 180px; }
    .mobile-tabs-menu.open { display: block; }
    .mobile-tabs-item { width: 100%; text-align: left; padding: 0.5rem 0.75rem; border: none; background: none; cursor: pointer; font-size: 0.875rem; color: var(--text); border-radius: var(--radius); font-family: inherit; }
    .mobile-tabs-item:hover { background: var(--row-hover); }
    .mobile-tabs-item[aria-current="true"] { background: rgba(13, 148, 136, 0.12); color: var(--accent); }
    @media (max-width: 768px) {
      .main-tabs { gap: 0.5rem; }
      .main-tabs [role="tab"] { display: none; }
      .mobile-tabs-btn { display: inline-flex; }
      .main-tabs-center-logo { display: block; }
      .main-tabs-date-select { display: none; }
      .mobile-date-btn { display: inline-flex; }
    }
    .main-tab-panel { display: none; position: relative; }
    .main-tab-panel.active { display: block; }
    .stats-row-wrap { position: relative; }
    .sessions-table-wrap { position: relative; }
    .page-body { position: relative; }
    .page-body.report-building { min-height: calc(100vh - var(--kexo-loader-page-top, 0px)); }

    /* Hide all content during loading/building - show only the loading overlay */
    .page-body.report-building > :not(.page-body-loader-overlay) {
      display: none !important;
    }
    /* KPI sub-text (comparison to yesterday) */
    .live-kpi-sub { font-size: .6875rem; font-weight: 500; color: var(--tblr-secondary); margin-top: .25rem; }
    .live-kpi-sub.is-hidden { display: none; }
    #live-kpi-sales { color: var(--tblr-primary); }
    .kpi-mini-spinner {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: conic-gradient(from 0deg, #4592e9, #32bdb0, #fa9f2e, #4592e9);
      -webkit-mask: radial-gradient(farthest-side, transparent calc(100% - 2.5px), #000 calc(100% - 2px));
      mask: radial-gradient(farthest-side, transparent calc(100% - 2.5px), #000 calc(100% - 2px));
      animation: modern-spin 0.9s linear infinite;
      display: inline-block;
      vertical-align: middle;
    }
    /* Sale toast: body-level overlay (not inside KPI grid). */
    .sale-toast-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 1000;
      display: flex;
      align-items: flex-start;
      justify-content: center;
      pointer-events: none;
    }
    .sale-toast {
      position: relative;
      width: min(500px, calc(100vw - 24px));
      max-width: 500px;
      border-radius: 0; /* no rounding except the product image */
      border: 1px solid #0d9488;
      background: #0d9488;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      /* Reserve room for the right-side amount/time block (absolute). */
      padding: 0.75rem 132px 0.75rem 0.75rem;
      opacity: 0;
      transform: translateY(-120%);
      transition: opacity 260ms ease, transform 260ms ease;
      color: #fff;
      pointer-events: none;
    }
    .sale-toast.active { opacity: 1; transform: translateY(0); }
    /* After the slide completes we remove transform to avoid fuzzy text on Windows */
    .sale-toast.settled { transform: none !important; }
    .sale-toast .sale-toast-thumb { width: 42px; height: 42px; border-radius: 999px; overflow: hidden; border: 1px solid rgba(255,255,255,0.25); display: inline-flex; align-items: center; justify-content: center; background: rgba(255,255,255,0.12); flex-shrink: 0; }
    .sale-toast .sale-toast-thumb img { width: 100%; height: 100%; object-fit: cover; display: block; }
    .sale-toast .sale-toast-thumb-placeholder { width: 100%; height: 100%; display: block; background: rgba(255,255,255,0.2); border-radius: inherit; }
    .sale-toast .sale-toast-mid { flex: 1; min-width: 0; display: flex; flex-direction: column; justify-content: center; text-align: left; }
        .sale-toast .sale-toast-title { display: flex; align-items: center; gap: 0.35rem; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.04em; color: #fff; font-weight: 500; line-height: 1.1; }
    .sale-toast .sale-toast-inline-flag-img { width: 20px; height: 15px; object-fit: cover; border-radius: 0; display: block; margin: -1px 6px 0 0; flex-shrink: 0; }
        .sale-toast .sale-toast-product { font-size: 13px; font-weight: 300; color: #fff; line-height: 1.25; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; padding: 5px 0 0 0; }
        .sale-toast .sale-toast-amount-wrap { min-width: 90px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 2px; background: #088378; padding: 0 14px; border-radius: 0; position: absolute; top: 0; right: 0; height: 100%; text-align: center; }
        .sale-toast .sale-toast-amount { display: inline-flex; align-items: center; justify-content: center; font-size: 1.05rem; font-weight: 800; color: #fff; letter-spacing: -0.2px; }
        .sale-toast .sale-toast-time { display: inline-flex; align-items: center; justify-content: center; gap: 4px; font-size: 12px; font-weight: 600; letter-spacing: 0.02em; line-height: 1; font-variant-numeric: tabular-nums; color: #e7db75; text-transform: uppercase; }
        .sale-toast .sale-toast-time-icon { width: 11px; height: 11px; display: block; color: currentColor; fill: currentColor; flex-shrink: 0; }
        .sale-toast .sale-toast-time-icon path { fill: currentColor; }
    .kpi-ticker { display: inline-block; overflow: hidden; height: 1.15em; vertical-align: bottom; }
    .kpi-ticker-stack { display: block; transform: translateY(0); transition: transform 420ms cubic-bezier(0.22, 1, 0.36, 1); }
    .kpi-ticker-line { display: block; height: 1.15em; line-height: 1.15em; }
    .kpi-ticker.run .kpi-ticker-stack { transform: translateY(-100%); }
    .kpi-odometer { display: inline-flex; align-items: baseline; }
    .kpi-odometer-char { display: inline-block; }
    .kpi-odometer-digit { display: inline-block; overflow: hidden; height: 1em; line-height: 1em; }
    .kpi-odometer-stack { display: block; transform: translateY(0); transition: transform 420ms cubic-bezier(0.22, 1, 0.36, 1); }
    .kpi-odometer-stack span { display: block; height: 1em; line-height: 1em; }
    .shared-kpi-wrap { margin-bottom: 1.25rem; }
        .kpi-mobile-pager { position: relative; overflow-x: auto; -webkit-overflow-scrolling: touch; scrollbar-width: none; -ms-overflow-style: none; }
        .kpi-mobile-pager::-webkit-scrollbar { display: none; }
        .kpi-mobile-pager.kpi-pager-active { padding-right: 44px; }
        .kpi-mobile-next {
          display: inline-flex;
          position: absolute;
          right: 0;
          top: 50%;
          transform: translateY(-50%);
          width: 36px;
          height: 36px;
          align-items: center;
          justify-content: center;
          border: 1px solid var(--border);
          border-radius: 999px;
          background: var(--card);
          color: var(--text);
          cursor: pointer;
          box-shadow: var(--shadow);
        }
        .kpi-mobile-next:hover { color: var(--accent); border-color: rgba(13, 148, 136, 0.55); }
        .kpi-mobile-next:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
        .kpi-mobile-next i { font-size: 18px; line-height: 1; }
    @media (max-width: 768px) {
      #live-kpi-grid { flex-wrap: nowrap; }
      #live-kpi-grid > [class*="col-"] { flex: 0 0 calc(50% - .5rem); min-width: calc(50% - .5rem); }
      .sale-toast-overlay { justify-content: stretch; }
      .sale-toast { width: 100vw; max-width: 100vw; transform: translateY(-110%); }
      .sale-toast .sale-toast-product { font-size: 11px; }
    }
    @media (prefers-reduced-motion: reduce) {
      .sale-toast { transition: none; }
    }
    .live-view-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px; gap: 0; }
    .live-view-header .table-title { margin: 0; font-size: var(--table-header-font-size); font-weight: 500; color: var(--text); flex-shrink: 0; display: flex; align-items: center; gap: 0.35rem; letter-spacing: -0.1px; }
    .table-title-tabs { display: inline-flex; align-items: center; gap: 0; flex-wrap: wrap; }
    .table-title-tabs button { padding: 0.2rem 0.5rem; margin: 0; border: none; background: none; font-size: inherit; font-weight: 500; color: var(--muted); cursor: pointer; border-radius: var(--radius); }
    .table-title-tabs button:hover { color: var(--text); }
    .table-title-tabs button[aria-selected="true"] { color: var(--accent); font-weight: 600; }
    .table-title-tabs-sep { margin: 0 0.35rem; color: var(--border); font-weight: 400; user-select: none; }
    .table-title-label { display: inline; }
    .live-view-header .live-view-online { flex-shrink: 0; }
    .live-view-header .next-update-block { flex-shrink: 0; }
    .live-view-header .live-view-next-update-center { flex: 1; display: flex; justify-content: center; }
    .live-view-online { font-size: 0.875rem; color: var(--muted); display: flex; align-items: center; gap: 0.35rem; margin-right: 10px; }
    .live-view-online .online-user-icon { font-size: 16px; line-height: 1; flex-shrink: 0; display: inline-block; }
    .live-view-online .online-count-wrap { display: inline-flex; align-items: center; gap: 0.35rem; }
    .mini-spinner {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: conic-gradient(from 0deg, #4592e9, #32bdb0, #fa9f2e, #4592e9);
      -webkit-mask: radial-gradient(farthest-side, transparent calc(100% - 2px), #000 calc(100% - 1.5px));
      mask: radial-gradient(farthest-side, transparent calc(100% - 2px), #000 calc(100% - 1.5px));
      animation: modern-spin 0.9s linear infinite;
      display: inline-block;
    }
    .be-spinner {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: conic-gradient(from 0deg, #4592e9, #32bdb0, #fa9f2e, #4592e9);
      -webkit-mask: radial-gradient(farthest-side, transparent calc(100% - 3.5px), #000 calc(100% - 3px));
      mask: radial-gradient(farthest-side, transparent calc(100% - 3.5px), #000 calc(100% - 3px));
      animation: modern-spin 0.9s linear infinite;
      display: inline-block;
    }
    .live-view-online strong {
        color: #333;
        font-size: 16px;
        line-height: 15px;
        vertical-align: middle;
        padding: 2px 0 0 0;
    }
    .dashboard-top-bar select:not(.top-bar-date-select) { padding: 0.5rem 0.75rem; border: 1px solid var(--border); border-radius: var(--radius); background: var(--card); font-size: 0.875rem; color: var(--text); appearance: none; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M17 9.5L12 14.5L7 9.5' stroke='%23333' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 0.5rem center; background-size: 16px 16px; padding-right: 1.75rem; }
    .dashboard-top-bar select option:disabled { color: var(--muted); }
    #audio-mute-btn { display: inline-flex; align-items: center; justify-content: center; width: 20px; height: 20px; padding: 0; border: none; background: none; cursor: pointer; color: var(--text); }
    #audio-mute-btn:hover { color: var(--accent); }
    #audio-mute-btn:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
    #audio-mute-btn.muted { opacity: 0.6; color: var(--muted); }
    #audio-mute-btn svg { width: 20px; height: 20px; }
    .table-scroll-wrap { overflow-x: auto; -webkit-overflow-scrolling: touch; margin-bottom: 0.75rem; border-radius: var(--radius); border: 1px solid var(--border); }
    .table-scroll-wrap.tight-cols { --table-cell-padding-x: 0.6rem; }
    .table-scroll-wrap table { margin: 0; width: max(100%, 800px); table-layout: auto; border: none; box-shadow: none; }
    .table-scroll-wrap th, .table-scroll-wrap td { border-bottom: none; padding: var(--table-cell-padding-y) var(--table-cell-padding-x); }
        .table-scroll-wrap tr:last-child td { border-bottom: none; }
    .table-scroll-wrap th:nth-child(1), .table-scroll-wrap td:nth-child(1) { width: 1%; min-width: 240px; text-align: left; }
    .table-scroll-wrap .last-action-cell { min-width: 60px; }
    .table-scroll-wrap .last-action-cell .landing-thumb { flex-shrink: 0; }
    .table-scroll-wrap th:nth-child(2), .table-scroll-wrap td:nth-child(2) { min-width: 56px; }
    .table-scroll-wrap th.source-cell, .table-scroll-wrap td.source-cell { min-width: 90px; max-width: 160px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .table-scroll-wrap th.cart-value-cell, .table-scroll-wrap td.cart-value-cell { width: 1%; min-width: 4.5rem; max-width: 6rem; white-space: nowrap; }
    .table-scroll-wrap .last-action-cell { min-width: 100px; max-width: none; }
    .table-scroll-wrap .last-action-cell a { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 100%; display: inline-block; }
    .table-scroll-wrap .cart-value-sale { color: var(--accent); font-weight: 600; }
    .table-scroll-wrap th.sortable { cursor: pointer; user-select: none; }
    .table-scroll-wrap th.sortable:hover { color: var(--accent); }
    .table-scroll-wrap th.th-sort-asc::after,
    .table-scroll-wrap th.th-sort-desc::after { content: ''; display: inline-block; width: 16px; height: 16px; margin-left: 6px; vertical-align: middle; background-color: currentColor; -webkit-mask-size: contain; -webkit-mask-repeat: no-repeat; -webkit-mask-position: center; mask-size: contain; mask-repeat: no-repeat; mask-position: center; }
    .table-scroll-wrap th.th-sort-asc::after { -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 14.5L12 9.5L17 14.5' stroke='black' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'/%3E%3C/svg%3E"); mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 14.5L12 9.5L17 14.5' stroke='black' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'/%3E%3C/svg%3E"); }
    .table-scroll-wrap th.th-sort-desc::after { -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M17 9.5L12 14.5L7 9.5' stroke='black' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'/%3E%3C/svg%3E"); mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M17 9.5L12 14.5L7 9.5' stroke='black' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'/%3E%3C/svg%3E"); }
    .table-scroll-wrap .arrived-cell, .table-scroll-wrap .last-seen-cell { min-width: 4.5rem; }
    /* Pagination: Tabler .pagination generated by JS — minimal overrides */
    .table-pagination {
      border-top: 1px solid var(--tblr-border-color, #e6e7e9);
      padding: .5rem .75rem;
    }
    .source-googleads-img, .source-icon-img { width: 20px; height: 20px; vertical-align: middle; display: inline-block; }
    .source-icons { display: inline-flex; align-items: center; gap: 4px; flex-shrink: 0; }
    .source-icons img {
      width: 20px !important;
      height: 20px !important;
      max-width: 20px !important;
      max-height: 20px !important;
      object-fit: contain;
      display: inline-block;
    }
    .source-icons svg {
      width: 20px !important;
      height: 20px !important;
      max-width: 20px !important;
      max-height: 20px !important;
      display: block;
    }
    .source-icons i {
      width: 20px;
      height: 20px;
      font-size: 20px !important;
      line-height: 20px !important;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    .traffic-source-cell { display: inline-flex; align-items: center; gap: 0.5rem; min-width: 0; }
    .traffic-source-label { font-weight: 650; color: var(--text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 220px; }
    @media (max-width: 1800px) {
      .stats-row { display: grid; grid-template-columns: 1fr 1fr; gap: var(--table-gap); }
      .stats-card { min-width: 0; }
      .stats-card #stats-best-sellers .by-country-table th:first-child,
      .stats-card #stats-best-sellers .by-country-table td:first-child,
      .stats-card #stats-worst-products .by-country-table th:first-child,
      .stats-card #stats-worst-products .by-country-table td:first-child,
      .stats-card #stats-best-variants .by-country-table th:first-child,
      .stats-card #stats-best-variants .by-country-table td:first-child,
      .stats-card #stats-worst-variants .by-country-table th:first-child,
      .stats-card #stats-worst-variants .by-country-table td:first-child { min-width: 200px; }
    }
    @media (max-width: 768px) {
      .aov-cards-grid { grid-template-columns: 1fr; }
      #finishes-cards-grid[data-cards-view="finishes"] { grid-template-columns: 1fr; }
      #finishes-cards-grid[data-cards-view="lengths"] { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      .dashboard-top-bar { padding-left: 20px; padding-right: 20px; }
      .mobile-brand-logo { display: flex; }
      .main { padding: 20px; }
      .stats-row { grid-template-columns: 1fr; gap: var(--table-gap); margin-bottom: 1.25rem; }
      .stats-row.breakdown-row { grid-template-columns: 1fr; }
      #tab-panel-breakdown .stats-row { grid-template-columns: 1fr; }
      #tab-panel-products .stats-row,
      #products-type-tables-row { grid-template-columns: 1fr; }
      .stats-card { min-width: 100%; padding: 0; }
      .stats-card:first-child { min-width: 100%; }
      .stats-card #stats-best-sellers .by-country-table th:first-child,
      .stats-card #stats-best-sellers .by-country-table td:first-child,
      .stats-card #stats-worst-products .by-country-table th:first-child,
      .stats-card #stats-worst-products .by-country-table td:first-child,
      .stats-card #stats-best-variants .by-country-table th:first-child,
      .stats-card #stats-best-variants .by-country-table td:first-child,
      .stats-card #stats-worst-variants .by-country-table th:first-child,
      .stats-card #stats-worst-variants .by-country-table td:first-child { width: 55%; min-width: 140px; }
      .stats-main { font-size: 1.35rem; }
      .stats-breakdown { gap: 0.5rem; font-size: 0.75rem; }
      .live-view-header .table-title { font-size: var(--table-header-font-size); }
      .table-title { font-size: var(--table-header-font-size); margin-bottom: 0.35rem; }
      .live-view-header .next-update-block { display: inline-flex; }
      .live-view-header .live-view-next-update-center { flex: 0; }
      .next-update-label { display: none !important; }
      #table-tab-1h, #table-tab-sep-today-1h, #table-tab-sep-1h-live { display: none !important; }
      .table-scroll-wrap { margin-left: 0; margin-right: 0; border-radius: var(--radius); -webkit-overflow-scrolling: touch; overflow-x: auto; }
      .side-panel { width: 100%; padding: 1rem; }
      .side-panel-close { min-width: 44px; min-height: 44px; }
      .last-action-cell a { display: none; }
      .last-action-cell .landing-lines a { display: grid; }
      .last-action-cell .landing-lines { margin-top: 0; }
      .landing-thumb { width: 32px; height: 32px; }
      .thumb-wrap.thumb-stack .landing-thumb-exit { width: 24px; height: 24px; min-width: 24px; min-height: 24px; }
    }
    @media (max-width: 480px) {
      #finishes-cards-grid[data-cards-view="lengths"] { grid-template-columns: 1fr; }
      .dashboard-top-bar { padding-left: 20px; padding-right: 20px; }
      .main { padding: 20px; }
      .stats-card { padding: 0; }
    }
    .dashboard-footer { display: none; }

    /* config-btn replaced by Tabler btn btn-icon btn-ghost-secondary btn-sm */
    .config-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.35); display: none; align-items: center; justify-content: center; padding: 1rem; z-index: 9999; }
    .config-modal.open { display: flex; }
    .config-modal-card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow); width: 560px; max-width: 100%; max-height: 80vh; overflow: auto; padding: 1rem; }
    .config-modal-header { display: flex; align-items: center; justify-content: space-between; gap: 0.75rem; margin-bottom: 0.75rem; }
    .config-modal-title { margin: 0; font-size: 0.75rem; font-weight: 600; color: var(--muted); text-transform: uppercase; letter-spacing: 0.04em; }
    /* config-close replaced by Tabler btn btn-icon btn-ghost-secondary btn-sm */

    /* Traffic sources modal: allow "Source mapping" to go full-screen */
    #traffic-sources-modal.tsm-fullscreen { padding: 0; align-items: stretch; justify-content: stretch; }
    #traffic-sources-modal.tsm-fullscreen .config-modal-card { width: 100vw; height: 100vh; max-height: none; border-radius: 0; }
    #traffic-sources-modal.tsm-fullscreen .config-modal-card > .muted,
    #traffic-sources-modal.tsm-fullscreen #traffic-sources-picker { display: none; }
    #traffic-sources-modal.tsm-fullscreen .config-modal-header { position: sticky; top: 0; z-index: 5; margin-bottom: 0.85rem; padding-bottom: 0.85rem; background: var(--card); border-bottom: 1px solid var(--border); }
    .date-cal { display: grid; gap: 1rem; }
    .date-cal-month { border: 1px solid var(--border); border-radius: var(--radius); padding: 0.75rem; background: rgba(255,255,255,0.6); }
    .date-cal-month-title { font-size: 0.8125rem; font-weight: 700; color: var(--text); margin: 0 0 0.5rem; }
    .date-cal-weekdays, .date-cal-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 0.25rem; }
    .date-cal-weekday { font-size: 0.7rem; color: var(--muted); text-transform: uppercase; letter-spacing: 0.04em; text-align: center; padding: 0.15rem 0; }
    .date-cal-spacer { height: 32px; }
    .date-cal-day { border: 1px solid var(--border); border-radius: 8px; background: var(--card); color: var(--text); cursor: pointer; padding: 0.4rem 0; font-size: 0.85rem; font-weight: 600; text-align: center; }
    .date-cal-day:hover { border-color: rgba(13, 148, 136, 0.6); color: var(--accent); }
    .date-cal-day[disabled], .date-cal-day.disabled { opacity: 0.35; cursor: not-allowed; }
    .date-cal-day.selected { background: rgba(13, 148, 136, 0.12); border-color: rgba(13, 148, 136, 0.6); color: var(--accent); }
    .date-cal-day.in-range { background: rgba(13, 148, 136, 0.10); border-color: rgba(13, 148, 136, 0.25); }
    .date-cal-day.range-start,
    .date-cal-day.range-end { background: var(--accent); border-color: var(--accent); color: #fff; }
    .date-cal-day.range-start:hover,
    .date-cal-day.range-end:hover { color: #fff; }
    .date-cal-day.today { box-shadow: inset 0 0 0 2px rgba(13, 148, 136, 0.25); }
    .date-cal-footer { display: flex; align-items: center; justify-content: space-between; gap: 0.75rem; margin-top: 0.75rem; padding-top: 0.75rem; border-top: 1px solid var(--border); }
    .date-cal-summary { font-size: 0.8125rem; color: var(--text); font-weight: 600; }
    .date-cal-actions { display: inline-flex; align-items: center; gap: 0.5rem; flex-shrink: 0; }
    /* date-cal-btn replaced by Tabler btn btn-secondary/btn-primary btn-sm */

    .config-row { font-size: 0.8125rem; color: var(--text); margin: 0.25rem 0; word-break: break-word; }
    .config-row.ok { color: #0f766e; }
    .config-row.missing { color: #b91c1c; }

    /* Diagnostics (config status) redesign */
    #config-modal .config-modal-card { width: 940px; max-width: calc(100vw - 2rem); max-height: 86vh; }
    #config-modal .config-modal-header { margin-bottom: 0.5rem; }

    .diag { display: flex; flex-direction: column; gap: 0.85rem; }
    .diag-loading { font-size: 0.85rem; color: var(--muted); padding: 0.5rem 0; }

    .diag-top-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; }
    .diag-card { border: 1px solid var(--border); border-radius: var(--radius); background: rgba(255,255,255,0.75); padding: 0.9rem; }
    .diag-card-header { display: flex; align-items: center; justify-content: space-between; gap: 0.75rem; margin-bottom: 0.6rem; }
    .diag-brand { display: flex; align-items: center; gap: 0.55rem; min-width: 0; }
    .diag-logo { width: 26px; height: 26px; display: block; object-fit: contain; border-radius: 6px; flex-shrink: 0; }
    .diag-title { font-size: 0.95rem; font-weight: 750; color: var(--text); line-height: 1.1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .diag-sub { font-size: 0.75rem; color: var(--muted); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

    .diag-metrics { display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; }
    .diag-metric { display: flex; flex-direction: column; gap: 0.25rem; min-width: 0; }
    .diag-metric-label { font-size: 0.7rem; color: var(--muted); text-transform: uppercase; letter-spacing: 0.04em; }
    .diag-metric-value { font-size: 1.35rem; font-weight: 780; color: var(--text); line-height: 1.05; }
    .diag-metric-value.small { font-size: 1.15rem; }
    .diag-card-bots { grid-column: 1 / -1; display: flex; align-items: center; justify-content: space-between; gap: 1rem; }
    .diag-bots-left { display: flex; align-items: center; gap: 0.55rem; min-width: 0; }
    .diag-icon { width: 18px; height: 18px; color: var(--accent); flex-shrink: 0; }
    .diag-bots-meta { font-size: 0.75rem; color: var(--muted); }

    .diag-section-title { display: flex; align-items: center; gap: 0.45rem; margin: 0.1rem 0 0.2rem; font-size: 0.75rem; font-weight: 700; color: var(--muted); text-transform: uppercase; letter-spacing: 0.04em; }
    .diag-section-title svg { width: 16px; height: 16px; }

    .diag-table-scroll { overflow: auto; border-radius: var(--radius); }
    .diag-compare-table { width: 100%; --grid-cols: minmax(180px, 1.4fr) minmax(130px, 0.9fr) minmax(130px, 0.9fr) minmax(180px, 1.2fr); }
    .diag-compare-table .grid-cell { padding: 0.55rem 0.65rem; font-size: 0.8125rem; }
    .diag-compare-table .grid-cell code { font-size: 0.78rem; }
    .diag-compare-table .diag-compare-section { background: rgba(0,0,0,0.03); }
    .diag-compare-table .diag-diff-ok { color: #0f766e; font-weight: 750; }
    .diag-compare-table .diag-diff-bad { color: #b91c1c; font-weight: 750; }
    .diag-compare-table .diag-diff-warn { color: #a16207; font-weight: 750; }

    .diag-pill { display: inline-flex; align-items: center; gap: 0.35rem; padding: 0.15rem 0.5rem; border-radius: 999px; font-size: 0.72rem; font-weight: 800; letter-spacing: 0.01em; white-space: nowrap; }
    .diag-pill.ok { background: rgba(13, 148, 136, 0.12); border: 1px solid rgba(13, 148, 136, 0.25); color: #0f766e; }
    .diag-pill.bad { background: rgba(185, 28, 28, 0.10); border: 1px solid rgba(185, 28, 28, 0.25); color: #b91c1c; }
    .diag-pill.warn { background: rgba(161, 98, 7, 0.12); border: 1px solid rgba(161, 98, 7, 0.24); color: #a16207; }

    .diag-tech { border: 1px solid var(--border); border-radius: var(--radius); background: rgba(255,255,255,0.72); overflow: hidden; }
    .diag-tech summary { list-style: none; cursor: pointer; display: flex; align-items: center; justify-content: space-between; gap: 0.75rem; padding: 0.75rem 0.9rem; }
    .diag-tech summary::-webkit-details-marker { display: none; }
    .diag-tech-head { display: flex; flex-direction: column; gap: 0.1rem; min-width: 0; }
    .diag-tech-head strong { font-size: 0.9rem; color: var(--text); }
    .diag-tech-head span { font-size: 0.75rem; color: var(--muted); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .diag-tech-meta { display: flex; align-items: center; gap: 0.45rem; flex-shrink: 0; }
    .diag-chevron { width: 18px; height: 18px; color: var(--muted); flex-shrink: 0; transition: transform 0.18s ease; }
    .diag-tech[open] .diag-chevron { transform: rotate(180deg); }

    .diag-tabs { border-top: 1px solid var(--border); padding: 0.75rem 0.9rem 0.9rem; }
    .diag-tab-nav { display: flex; flex-wrap: wrap; gap: 0.35rem; align-items: center; }
    .diag-tab { position: absolute; opacity: 0; pointer-events: none; }
    .diag-tab-label { display: inline-flex; align-items: center; gap: 0.4rem; padding: 0.4rem 0.65rem; border: 1px solid var(--border); border-radius: 999px; background: var(--card); cursor: pointer; font-size: 0.8rem; color: var(--text); }
    .diag-tab-label svg { width: 14px; height: 14px; }
    .diag-tab:focus-visible + .diag-tab-label { outline: 2px solid var(--accent); outline-offset: 2px; }
    .diag-tab:checked + .diag-tab-label { border-color: rgba(13, 148, 136, 0.55); color: var(--accent); background: rgba(13, 148, 136, 0.08); }

    .diag-panels { display: block; flex-basis: 100%; width: 100%; margin-top: 0.75rem; }
    .diag-panel { display: none; }
    #diag-tab-shopify:checked ~ .diag-panels .diag-panel-shopify { display: block; }
    #diag-tab-pixel:checked ~ .diag-panels .diag-panel-pixel { display: block; }
    #diag-tab-traffic:checked ~ .diag-panels .diag-panel-traffic { display: block; }
    #diag-tab-sources:checked ~ .diag-panels .diag-panel-sources { display: block; }
    #diag-tab-system:checked ~ .diag-panels .diag-panel-system { display: block; }

    /* Diagnostics main tabs (Comparison / Technical / Definitions) */
    #diag-main-tab-compare:checked ~ .diag-panels .diag-panel-main-compare { display: block; }
    #diag-main-tab-tech:checked ~ .diag-panels .diag-panel-main-tech { display: block; }
    #diag-main-tab-defs:checked ~ .diag-panels .diag-panel-main-defs { display: block; }

    /* When tech panel is already a tab, remove inner top border/padding */
    .diag-panel-main-tech .diag-tabs { border-top: none; padding: 0; }

    .diag-panel-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; }
    .diag-panel-card { border: 1px solid var(--border); border-radius: var(--radius); background: rgba(255,255,255,0.82); padding: 0.75rem; }
    .diag-panel-card--full { grid-column: 1 / -1; }
    .diag-panel-card-title { display: flex; align-items: center; gap: 0.45rem; margin: 0 0 0.5rem; font-size: 0.75rem; font-weight: 700; color: var(--muted); text-transform: uppercase; letter-spacing: 0.04em; }
    .diag-panel-card-title svg { width: 16px; height: 16px; }
    .diag-kv { display: flex; align-items: baseline; justify-content: space-between; gap: 0.75rem; padding: 0.25rem 0; border-bottom: 1px dashed rgba(0,0,0,0.08); font-size: 0.8125rem; }
    .diag-kv:last-child { border-bottom: none; }
    .diag-kv .k { color: var(--muted); flex: 0 0 auto; }
    .diag-kv .v { color: var(--text); font-weight: 650; text-align: right; min-width: 0; word-break: break-word; }
    .diag-note { margin-top: 0.45rem; font-size: 0.75rem; color: var(--muted); line-height: 1.35; }
    .diag-toggle-row { display: flex; align-items: center; gap: 0.55rem; margin-top: 0.25rem; font-size: 0.85rem; color: var(--text); font-weight: 650; }
    .diag-toggle-row input { width: 16px; height: 16px; accent-color: var(--accent); }
    .diag-toggle-row span { flex: 1; min-width: 0; }
    .diag-def-list { margin: 0.35rem 0 0; padding-left: 1.1rem; font-size: 0.8125rem; color: var(--text); }
    .diag-def-list li { margin: 0.2rem 0; }
    .diag-def-list code { font-size: 0.78rem; }
    .diag-formula { color: var(--muted); font-weight: 650; }

    @media (max-width: 768px) {
      #config-modal .config-modal-card { width: 100%; max-height: 92vh; }
      .diag-top-grid { grid-template-columns: 1fr; }
      .diag-card-bots { grid-column: auto; }
      .diag-panel-grid { grid-template-columns: 1fr; }
    }

    /* Traffic source mapping UI (config modal) */
    .tsm-actions { display: flex; flex-wrap: wrap; gap: 0.45rem; align-items: center; margin: 0 0 0.6rem; }
    .tsm-actions--footer { margin-top: 0.6rem; }
    .tsm-btn { display: inline-flex; align-items: center; gap: 0.35rem; padding: 0.4rem 0.65rem; border: 1px solid var(--border); border-radius: 999px; background: var(--card); cursor: pointer; font-size: 0.8rem; color: var(--text); }
    .tsm-btn svg { width: 14px; height: 14px; }
    .tsm-btn.primary { border-color: rgba(13, 148, 136, 0.55); color: var(--accent); background: rgba(13, 148, 136, 0.08); }
    .tsm-btn:disabled { opacity: 0.6; cursor: not-allowed; }
    .tsm-table-scroll { overflow: auto; border-radius: var(--radius); border: 1px solid rgba(0,0,0,0.06); background: rgba(255,255,255,0.65); }
    .tsm-table-scroll .grid-table { border: none; border-radius: 0; background: transparent; box-shadow: none; }
    .tsm-table { width: 100%; }
    .tsm-table .grid-cell { padding: 0.5rem 0.6rem; font-size: 0.8125rem; border-bottom: 1px dashed rgba(0,0,0,0.08); vertical-align: top; text-align: left; }
    .tsm-table .grid-body .grid-row:last-child .grid-cell { border-bottom: none; }
    .tsm-input { width: 100%; min-height: 40px; padding: 0.55rem 0.7rem; border: 1px solid var(--border); border-radius: 0.7rem; background: rgba(255,255,255,0.9); color: var(--text); font-size: 0.92rem; }
    .tsm-input::placeholder { color: rgba(0,0,0,0.4); }
    .tsm-select { min-height: 40px; }
    .tsm-save-msg { font-size: 0.75rem; color: var(--muted); }
    .tsm-sources-grid { --grid-cols: minmax(180px, 1.2fr) minmax(110px, 0.6fr) minmax(260px, 1.7fr) minmax(96px, 0.6fr); min-width: 760px; }
    .tsm-tokens-grid { --grid-cols: minmax(220px, 1.1fr) minmax(160px, 0.6fr) minmax(360px, 2.1fr); min-width: 860px; }
    .tsm-token-map-row { display: flex; flex-wrap: wrap; gap: 0.45rem; align-items: center; }
    .tsm-token-map-row .tsm-select { width: 100px; flex: 0 0 100px; }
    .tsm-token-other { flex: 1 1 180px; min-width: 160px; }
    .tsm-token-icon { flex: 2 1 240px; min-width: 200px; }
    .diag-note.tsm-seen-subnote { margin: 0.15rem 0 0; }
    .tsm-mapped-list { margin-top: 0.35rem; }
    .tsm-mapped-pill { display: inline-flex; align-items: center; gap: 0.35rem; padding: 0.18rem 0.5rem; border-radius: 999px; border: 1px solid rgba(0,0,0,0.10); background: rgba(255,255,255,0.65); font-size: 0.75rem; font-weight: 750; margin: 0.15rem 0.35rem 0 0; }
    .tsm-icon-preview { width: 18px; height: 18px; border-radius: 5px; object-fit: contain; background: rgba(0,0,0,0.03); border: 1px solid rgba(0,0,0,0.06); }
    .tsm-icon-input-row { display: flex; gap: 0.45rem; align-items: center; }
    .tsm-icon-spacer { display: inline-block; width: 18px; height: 18px; }

    /* Shared helpers */
    .is-hidden { display: none !important; }
    .u-mb-sm { margin-bottom: 0.5rem; }
    .u-mt-xs { margin-top: 0.5rem; }
    .u-mt-sm { margin-top: 0.65rem; }
    .u-mt-md { margin-top: 0.85rem; }
    .u-minw-0 { min-width: 0; }
    .u-text-right { text-align: right; }

    /* Shared structural wrappers */
    .diag-details-body { border-top: 1px solid var(--border); padding: 0.75rem 0.9rem 0.9rem; }

    /* Standalone auth/login pages (served before dashboard auth) */
    body.page-login {
      --bg: #f5f7f7;
      --card: rgba(255, 255, 255, 0.92);
      --text: #0f172a;
      --muted: #475569;
      --brand: #0d9488;
      --brandHover: #0f766e;
      --border: rgba(15, 23, 42, 0.10);
      --shadow: 0 10px 30px rgba(2, 6, 23, 0.12);
      --radius: 16px;
      --ring: rgba(13, 148, 136, 0.35);

      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text);
      background:
        radial-gradient(900px circle at 20% 10%, rgba(13, 148, 136, 0.18), transparent 45%),
        radial-gradient(700px circle at 90% 30%, rgba(13, 148, 136, 0.10), transparent 50%),
        linear-gradient(180deg, #fafafa 0%, var(--bg) 100%);
      padding: 28px 18px;
      padding-bottom: 28px; /* override dashboard footer padding */
    }
    .page-login .shell { width: 100%; max-width: 460px; }
    .page-login .brand { display: flex; flex-direction: column; align-items: center; margin-bottom: 14px; }
    .page-login .logo { width: 92px; height: 92px; object-fit: contain; display: block; }
    .page-login .brand-title { margin: 10px 0 0; font-size: 1.05rem; font-weight: 800; letter-spacing: -0.01em; }
    .page-login .brand-subtitle { margin: 6px 0 0; font-size: 0.9rem; color: var(--muted); text-align: center; line-height: 1.45; }
    .page-login .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 22px;
      backdrop-filter: blur(8px);
    }
    .page-login .btn {
      display: inline-flex;
      width: 100%;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 0.8rem 1rem;
      font-size: 0.95rem;
      font-weight: 800;
      border-radius: 12px;
      border: 1px solid transparent;
      cursor: pointer;
      text-align: center;
      text-decoration: none;
      user-select: none;
      transition: transform 90ms ease, background 120ms ease, border-color 120ms ease, box-shadow 120ms ease;
    }
    .page-login .btn:active { transform: translateY(1px); }
    .page-login .btn:focus-visible { outline: 3px solid var(--ring); outline-offset: 2px; }
    .page-login .btn-icon { width: 18px; height: 18px; display: block; }
    .page-login .btn-primary {
      background: var(--brand);
      color: #fff;
      border-color: rgba(13, 148, 136, 0.55);
      box-shadow: 0 8px 16px rgba(13, 148, 136, 0.22);
    }
    .page-login .btn-primary:hover { background: var(--brandHover); }
    .page-login .alert {
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 0.75rem 0.85rem;
      margin-bottom: 12px;
      background: rgba(255, 255, 255, 0.75);
    }
    .page-login .alert-title { font-weight: 800; font-size: 0.9rem; margin: 0 0 0.25rem; }
    .page-login .alert-body { font-size: 0.9rem; color: var(--muted); }
    .page-login .alert-error { border-color: rgba(220, 38, 38, 0.28); background: rgba(220, 38, 38, 0.06); }
    .page-login .alert-error .alert-body { color: #991b1b; }
    .page-login .muted { color: var(--muted); font-size: 0.9rem; margin: 0; }
    .page-login .login-actions { margin: 20px auto; max-width: 300px; }
    .page-login .fineprint { margin-top: 14px; text-align: center; color: var(--muted); font-size: 0.78rem; line-height: 1.35; }
    .page-login .fineprint a { color: var(--brandHover); text-decoration: none; font-weight: 700; }
    .page-login .fineprint a:hover { text-decoration: underline; }

    body.page-auth-loading {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f6f6f7;
      font-family: system-ui, sans-serif;
      padding-bottom: 0; /* override dashboard footer padding */
    }
    .page-auth-loading .spinner {
      width: 40px;
      height: 40px;
      border: 3px solid #e1e3e5;
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: refresh-spin .8s linear infinite;
    }

    /* KPI diff: Shopify vs Kexo compare modal */
    .kpi-compare-inline-btn {
      border: none;
      background: none;
      padding: 0;
      margin: 0 3px 0 0;
      color: #888;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      vertical-align: middle;
    }
    .kpi-compare-inline-btn svg { width: 13px; height: 13px; display: block; fill: #888; }
    .kpi-compare-inline-btn:hover { color: #666; }
    .kpi-compare-inline-btn:hover svg { fill: #666; }
    .kpi-compare-inline-btn:focus-visible { outline: 2px solid rgba(13, 148, 136, 0.35); outline-offset: 2px; border-radius: 3px; }

    #kpi-compare-modal {
      background: rgba(10, 10, 14, 0.55);
      backdrop-filter: blur(16px) saturate(150%);
      -webkit-backdrop-filter: blur(16px) saturate(150%);
    }
    #kpi-compare-modal .kpi-compare-modal-card {
      display: flex;
      flex-direction: column;
      width: 980px;
      max-width: calc(100vw - 2rem);
      max-height: min(92dvh, 96vh);
      overflow: hidden;
      padding: 0;
      border-radius: 16px;
      border: 1px solid rgba(0, 0, 0, 0.06);
      background: #ffffff;
      box-shadow: 0 32px 80px rgba(0, 0, 0, 0.14), 0 2px 6px rgba(0, 0, 0, 0.06);
    }
    #kpi-compare-modal .kpi-compare-modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 16px 24px;
      border-bottom: 1px solid rgba(0, 0, 0, 0.06);
      background: #ffffff;
    }
    #kpi-compare-modal .kpi-compare-modal-header-left { display: flex; flex-direction: column; gap: 2px; min-width: 0; }
    #kpi-compare-modal .kpi-compare-kicker {
      font-size: 11px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: rgba(15, 23, 42, 0.5);
    }
    #kpi-compare-modal .kpi-compare-title { margin: 0; font-size: 15px; font-weight: 600; letter-spacing: -0.01em; color: #0f172a; }
    #kpi-compare-modal .kpi-compare-meta { font-size: 12px; font-weight: 500; color: rgba(15, 23, 42, 0.5); }
    #kpi-compare-modal .kpi-compare-modal-actions { display: flex; align-items: center; gap: 8px; flex-shrink: 0; }
    #kpi-compare-modal .kpi-compare-action-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      padding: 0;
      border-radius: 10px;
      border: 1px solid rgba(0, 0, 0, 0.08);
      background: #fafafa;
      cursor: pointer;
      color: #475569;
      transition: all 0.15s ease;
    }
    #kpi-compare-modal .kpi-compare-action-btn i { font-size: 16px; line-height: 1; }
    #kpi-compare-modal .kpi-compare-action-btn span { display: none; }
    #kpi-compare-modal .kpi-compare-action-btn:hover { background: rgba(13, 148, 136, 0.08); border-color: rgba(13, 148, 136, 0.2); color: #0d9488; }
    #kpi-compare-modal .kpi-compare-action-btn:active { transform: translateY(1px); }
    #kpi-compare-modal .kpi-compare-action-btn:focus-visible { outline: 2px solid #0d9488; outline-offset: 2px; }
    #kpi-compare-modal .kpi-compare-action-btn.spinning i { animation: none; }
    #kpi-compare-modal .kpi-compare-close-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      padding: 0;
      border-radius: 10px;
      border: 1px solid rgba(0, 0, 0, 0.08);
      background: #fafafa;
      cursor: pointer;
      color: #64748b;
      font-size: 20px;
      line-height: 1;
      transition: all 0.15s ease;
    }
    #kpi-compare-modal .kpi-compare-close-btn:hover { background: rgba(239, 68, 68, 0.06); border-color: rgba(239, 68, 68, 0.15); color: #dc2626; }
    #kpi-compare-modal .kpi-compare-close-btn:active { transform: translateY(1px); }
    #kpi-compare-modal .kpi-compare-close-btn:focus-visible { outline: 2px solid rgba(239, 68, 68, 0.28); outline-offset: 2px; }

    #kpi-compare-modal .kpi-compare-modal-body { padding: 24px; overflow: auto; background: #fafbfc; }
    #kpi-compare-modal .kpi-compare-loading {
      display: flex; align-items: center; justify-content: center;
      padding: 60px 0; color: #94a3b8;
    }
    #kpi-compare-modal .kpi-compare-loading svg { display: none; }

    #kpi-compare-modal .kpi-compare-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    #kpi-compare-modal .kpi-compare-card {
      border: 1px solid rgba(0, 0, 0, 0.06);
      border-radius: 14px;
      background: #f8fafc;
      padding: 20px;
      transition: box-shadow 0.2s ease;
    }
    #kpi-compare-modal .kpi-compare-card:hover { box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06); }
    #kpi-compare-modal .kpi-compare-card--simple .kpi-compare-brand { margin: 0; }

    #kpi-compare-modal .kpi-compare-brand { display: flex; align-items: center; justify-content: space-between; gap: 0.75rem; margin: 2px 0 16px; }
    #kpi-compare-modal .kpi-compare-brand-left { display: flex; align-items: center; gap: 0.65rem; min-width: 0; }
    #kpi-compare-modal .kpi-compare-brand-right { display: flex; align-items: center; justify-content: flex-end; flex-shrink: 0; }
    #kpi-compare-modal .kpi-compare-brand-icon { width: 32px; height: 32px; border-radius: 8px; background: #ffffff; border: 1px solid rgba(0,0,0,0.06); object-fit: contain; flex-shrink: 0; }
    #kpi-compare-modal .kpi-compare-brand-text { display: flex; flex-direction: column; min-width: 0; gap: 0.15rem; }
    #kpi-compare-modal .kpi-compare-brand-name { font-size: 13px; font-weight: 600; letter-spacing: -0.01em; color: #0f172a; }
    #kpi-compare-modal .kpi-compare-brand-sub { font-size: 12px; font-weight: 500; color: rgba(15, 23, 42, 0.5); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    #kpi-compare-modal .kpi-compare-inline-metric { display: inline-flex; align-items: baseline; gap: 8px; white-space: nowrap; text-align: right; }
    #kpi-compare-modal .kpi-compare-inline-label { font-size: 11px; font-weight: 500; color: rgba(15, 23, 42, 0.5); text-transform: uppercase; letter-spacing: 0.06em; }
    #kpi-compare-modal .kpi-compare-inline-value { font-size: 16px; font-weight: 600; letter-spacing: -0.01em; color: #0f172a; }

    #kpi-compare-modal .kpi-compare-metrics { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    #kpi-compare-modal .kpi-compare-metric {
      border: 1px solid rgba(0, 0, 0, 0.06);
      border-radius: 10px;
      padding: 12px 14px;
      background: #ffffff;
    }
    #kpi-compare-modal .kpi-compare-metric-label { font-size: 11px; font-weight: 500; color: rgba(15, 23, 42, 0.5); text-transform: uppercase; letter-spacing: 0.06em; }
    #kpi-compare-modal .kpi-compare-metric-value { margin-top: 4px; font-size: 16px; font-weight: 600; letter-spacing: -0.01em; color: #0f172a; }

    #kpi-compare-modal .kpi-compare-error {
      border: 1px solid rgba(220, 38, 38, 0.18);
      background: rgba(220, 38, 38, 0.04);
      border-radius: 10px;
      padding: 14px 16px;
    }
    #kpi-compare-modal .kpi-compare-error-title { font-weight: 600; color: #991b1b; margin-bottom: 2px; }
    #kpi-compare-modal .kpi-compare-error-body { font-weight: 500; color: rgba(153, 27, 27, 0.88); font-size: 12px; }

    @media (max-width: 820px) {
      #kpi-compare-modal .kpi-compare-grid { grid-template-columns: 1fr; }
      #kpi-compare-modal .kpi-compare-brand-sub { white-space: normal; }
    }

    /* ── Dashboard tab ─────────────────────────────────────────────── */
    .dash-header { display: flex; align-items: center; justify-content: space-between; gap: 1rem; margin-bottom: 1.25rem; flex-wrap: wrap; }
    .dash-title { margin: 0; font-size: 1.25rem; font-weight: 700; color: var(--text); }
    .dash-range-wrap select { padding: 0.4rem 2rem 0.4rem 0.6rem; border: 1px solid var(--border); border-radius: var(--radius); background: var(--card); color: var(--text); font-size: 0.8125rem; font-family: inherit; cursor: pointer; appearance: none; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M17 9.5L12 14.5L7 9.5' stroke='%23666' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 0.35rem center; background-size: 14px 14px; }

    .dash-charts-row { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; margin-bottom: 0.75rem; }
    .dash-charts-row--single { grid-template-columns: 1fr; }
    .dash-chart-card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 0.85rem 1rem; box-shadow: var(--shadow); }
    .dash-chart-card--wide { grid-column: 1 / -1; }
    .dash-chart-title { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.04em; color: var(--muted); font-weight: 600; margin-bottom: 0.5rem; }
    .dash-chart-wrap { position: relative; width: 100%; min-height: 200px; }

    .dash-tables-row { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; margin-bottom: 0.75rem; }
    .dash-table-card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow); overflow: hidden; }
    .dash-table-title { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.04em; color: var(--muted); font-weight: 600; padding: 0.75rem 1rem 0.5rem; }
    .dash-table { width: 100%; border-collapse: collapse; font-size: 0.8125rem; }
    .dash-table thead th { padding: 0.5rem 1rem; text-align: left; font-size: var(--table-th-font-size); text-transform: uppercase; letter-spacing: 0.04em; color: var(--muted); font-weight: 600; background: #fff; border-bottom: 1px solid #f0f0f0; }
    .dash-table thead th:not(:first-child) { text-align: right; }
    .dash-table tbody td { padding: 0.5rem 1rem; border-bottom: 1px solid #f5f5f5; }
    .dash-table tbody td:not(:first-child) { text-align: right; font-variant-numeric: tabular-nums; }
    .dash-table tbody tr:last-child td { border-bottom: none; }
    .dash-table tbody tr:nth-child(odd) { background: #fff; }
    .dash-table tbody tr:nth-child(even) { background: #f8f8f8; }
    .dash-table tbody tr:hover { background: var(--row-hover); }
    .dash-table tbody td:first-child { font-weight: 500; max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .dash-table .dash-empty { text-align: center !important; color: var(--muted); padding: 1.5rem 1rem !important; font-style: italic; }

    .dash-roas-row { display: flex; gap: 0.75rem; margin-bottom: 0.75rem; }

    @media (max-width: 768px) {
      .dash-charts-row { grid-template-columns: 1fr; }
      .dash-tables-row { grid-template-columns: 1fr; }
      .dash-chart-wrap { height: 180px; }
    }

    /* ── Variants settings: table alias chips ───────────────────────── */
    .kexo-alias-chipbox {
      display: block;
      padding: 0.125rem 0.35rem;
      min-height: 34px;
      cursor: text;
    }

    .kexo-alias-chipbox .kexo-alias-chipbox-chips {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 0.35rem;
      min-height: 28px;
      width: 100%;
    }

    .kexo-alias-chipbox.ts-wrapper .kexo-alias-chipbox-chips.ts-control {
      border: 0;
      box-shadow: none;
      background: transparent;
      padding: 0;
    }

    .kexo-alias-chipbox input.kexo-alias-chipbox-input {
      border: 0;
      outline: none;
      padding: 0;
      margin: 0;
      background: transparent;
      flex: 1 1 140px;
      min-width: 120px;
      font-size: 0.8125rem;
      line-height: 1.2;
    }

    .kexo-alias-chipbox:focus-within {
      border-color: rgba(var(--tblr-primary-rgb), 0.45);
      box-shadow: 0 0 0 0.125rem rgba(var(--tblr-primary-rgb), 0.14);
    }

    .kexo-alias-chipbox input.kexo-alias-chipbox-input::placeholder {
      color: rgba(108, 117, 125, 0.95);
    }

    .kexo-alias-chip.item {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding-right: 0.25rem;
      border-radius: var(--tblr-border-radius-pill, 999px);
    }

    .kexo-alias-chip-remove {
      border: 0;
      background: transparent;
      padding: 0 0.15rem;
      line-height: 1;
      font-size: 0.9rem;
      color: inherit;
      opacity: 0.72;
      cursor: pointer;
    }

    .kexo-alias-chip-remove:hover { opacity: 1; }
