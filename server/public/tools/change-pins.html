<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <!--#include partials/head-theme.html-->
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="noindex, nofollow" />
  <link rel="icon" type="image/webp" href="/assets/logos/new/kexo.webp" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/core@1.4.0/dist/css/tabler.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/core@1.4.0/dist/css/tabler-flags.min.css" />
  <link rel="stylesheet" href="/tabler-theme.css" />
  <link rel="stylesheet" href="/custom.css" />
  <link rel="stylesheet" href="/diagnostics-modal.css" />
  <link rel="stylesheet" href="/tools.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr@4.6.13/dist/flatpickr.min.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr@4.6.13/dist/flatpickr.min.js" defer></script>
  <title>Kexo · Change Pins</title>
</head>
<body class="" data-page="change-pins">
    <!--#include partials/header.html-->
    <!--#include partials/page-body-start.html-->
          <div class="page-header mb-3">
            <div class="row align-items-center">
              <div class="col">
                <div class="page-pretitle">Tools</div>
                <h2 class="page-title">Change Pins</h2>
              </div>
            </div>
          </div>

          <div id="tool-change-pins-grid" class="row g-3 mb-3 tools-change-pins-grid">
            <div class="col-12 col-md-6">
          <div class="card tools-card" id="tool-change-pins-create">
            <div class="card-header">
              <div>
                <h3 class="card-title">Add a New Pin</h3>
                <div class="card-subtitle">Mark a change (pricing/ads/site/ops) so you can find it later and compare before/after.</div>
              </div>
            </div>
            <div class="card-body">
              <div class="tools-grid tools-form-block">
                <div class="tools-field">
                  <label class="tools-label form-label">Event date</label>
                  <div class="tools-input-row">
                    <div class="input-icon tools-input-icon">
                      <span class="input-icon-addon"><i class="fa-light fa-calendar-days" aria-hidden="true"></i></span>
                      <input class="form-control" type="text" id="pin-date" placeholder="YYYY-MM-DD" autocomplete="off" inputmode="numeric" />
                    </div>
                    <input class="form-control" type="time" id="pin-time" />
                    <div class="tools-note" id="pin-date-note"></div>
                  </div>
                </div>

                <div class="tools-field">
                  <label class="tools-label form-label">Title</label>
                  <div class="tools-input-row">
                    <input class="form-control" type="text" id="pin-title" placeholder="e.g. Prices -20%" />
                    <select class="form-select" id="pin-kind">
                      <option value="">Kind…</option>
                      <option value="pricing">Pricing</option>
                      <option value="ads">Ads</option>
                      <option value="site">Site</option>
                      <option value="ops">Ops</option>
                      <option value="other">Other</option>
                    </select>
                  </div>
                </div>

                <div class="tools-field">
                  <label class="tools-label form-label">Notes (optional)</label>
                  <textarea class="form-control" id="pin-notes" rows="2" placeholder="Any context (what changed, why, links, etc.)"></textarea>
                </div>

                <div class="tools-field">
                  <label class="tools-label form-label">Save</label>
                  <div class="tools-input-row">
                    <button class="btn btn-outline-primary" type="button" id="pin-save-btn" disabled>Save pin</button>
                    <div class="tools-note" id="pin-save-note"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
            </div>

            <div class="col-12 col-md-6">
          <div class="card tools-card" id="tool-change-pins-list">
            <div class="card-header">
              <div>
                <h3 class="card-title">Previously Added Pins</h3>
                <div class="card-subtitle">Click a pin in the below table to load stats before/after pin was added</div>
              </div>
            </div>
            <div class="card-body">
              <div class="tools-grid tools-form-block">
                <div class="tools-field">
                  <label class="tools-label form-label">Filter</label>
                  <div class="tools-input-row">
                    <div class="input-icon tools-input-icon">
                      <span class="input-icon-addon"><i class="fa-light fa-calendar-days" aria-hidden="true"></i></span>
                      <input class="form-control" type="text" id="filter-from" placeholder="From YYYY-MM-DD" autocomplete="off" inputmode="numeric" />
                    </div>
                    <div class="input-icon tools-input-icon">
                      <span class="input-icon-addon"><i class="fa-light fa-calendar-days" aria-hidden="true"></i></span>
                      <input class="form-control" type="text" id="filter-to" placeholder="To YYYY-MM-DD" autocomplete="off" inputmode="numeric" />
                    </div>
                    <input class="form-control" type="text" id="filter-q" placeholder="Search title, notes" />
                    <select class="form-select" id="filter-kind">
                      <option value="">All kinds</option>
                      <option value="pricing">Pricing</option>
                      <option value="ads">Ads</option>
                      <option value="site">Site</option>
                      <option value="ops">Ops</option>
                      <option value="other">Other</option>
                    </select>
                    <label class="form-check form-switch m-0">
                      <input class="form-check-input" type="checkbox" id="filter-archived" />
                      <span class="form-check-label">Show archived</span>
                    </label>
                    <button class="btn btn-outline-secondary" type="button" id="filter-refresh">Refresh</button>
                  </div>
                </div>

                <div id="pins-note" class="tools-note tools-note--tight"></div>
                <div id="pins-table" class="tools-results"></div>
              </div>
            </div>
          </div>
            </div>
          </div>

          <div class="card tools-card is-hidden" id="tool-change-pins-detail">
            <div class="card-header">
              <div>
                <h3 class="card-title" id="pin-detail-title"></h3>
              </div>
            </div>
            <div class="card-body">
              <div class="tools-grid tools-form-block" id="pin-compare-block">
                <div class="tools-field">
                  <label class="tools-label form-label">Compare</label>
                  <div class="tools-input-row">
                    <select class="form-select" id="effect-preset" aria-label="Compare preset">
                      <option value="today">Today</option>
                      <option value="yesterday">Yesterday</option>
                      <option value="7">7 days</option>
                      <option value="14">14 days</option>
                      <option value="30">30 days</option>
                      <option value="custom">Custom…</option>
                    </select>
                    <div class="input-icon tools-input-icon is-hidden" id="effect-custom-days-wrap">
                      <span class="input-icon-addon"><i class="fa-light fa-calendar-days" aria-hidden="true"></i></span>
                      <input class="form-control" type="number" id="effect-custom-days" min="1" max="60" step="1" placeholder="Days (1–60)" inputmode="numeric" />
                    </div>
                    <button class="btn btn-outline-secondary" type="button" id="effect-refresh">Refresh</button>
                    <div class="tools-note" id="effect-note"></div>
                  </div>
                </div>
              </div>

              <div id="detail-stats-view" class="tools-detail-stats">
                <div id="effect-results-stats" class="tools-results"></div>
                <div class="tools-detail-actions">
                  <button class="btn btn-outline-secondary" type="button" id="pin-detail-back">Back to Pins</button>
                  <button class="btn btn-outline-primary" type="button" id="pin-edit-btn">Edit Pin</button>
                  <button class="btn btn-outline-secondary" type="button" id="pin-archive-btn">Archive Pin</button>
                  <button class="btn btn-outline-secondary is-hidden" type="button" id="pin-unarchive-btn">Unarchive Pin</button>
                </div>
              </div>
              <div id="detail-edit-view" class="tools-detail-edit is-hidden">
                <div class="tools-grid tools-form-block">
                  <div class="tools-field">
                    <label class="tools-label form-label">Event</label>
                    <div class="tools-input-row">
                      <div class="input-icon tools-input-icon">
                        <span class="input-icon-addon"><i class="fa-light fa-calendar-days" aria-hidden="true"></i></span>
                        <input class="form-control" type="text" id="edit-date" placeholder="YYYY-MM-DD" autocomplete="off" inputmode="numeric" />
                      </div>
                      <input class="form-control" type="time" id="edit-time" />
                      <div class="tools-note" id="edit-date-note"></div>
                    </div>
                  </div>
                  <div class="tools-field">
                    <label class="tools-label form-label">Title</label>
                    <div class="tools-input-row">
                      <input class="form-control" type="text" id="edit-title" />
                      <select class="form-select" id="edit-kind">
                        <option value="">Kind…</option>
                        <option value="pricing">Pricing</option>
                        <option value="ads">Ads</option>
                        <option value="site">Site</option>
                        <option value="ops">Ops</option>
                        <option value="other">Other</option>
                      </select>
                    </div>
                  </div>
                  <div class="tools-field">
                    <label class="tools-label form-label">Notes</label>
                    <textarea class="form-control" id="edit-notes" rows="2"></textarea>
                  </div>
                  <div id="effect-results-edit" class="tools-results"></div>
                  <div class="tools-field">
                    <button class="btn btn-outline-primary" type="button" id="pin-update-btn">Save changes</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

    <!--#include partials/page-body-end.html-->
      <!--#include partials/footer.html-->

  <script src="https://cdn.jsdelivr.net/npm/@tabler/core@1.4.0/dist/js/tabler.min.js" defer></script>
  <script src="/kexo-table-builder.js" defer></script>
  <script src="/kexo-table-defs.js" defer></script>
  <script src="/kexo-chart-defs.js" defer></script>
  <script src="/kexo-chart-builder.js" defer></script>
  <script src="/app.js" defer></script>
  <script src="/tools-change-pins.js" defer></script>
  <script src="/theme-settings.js" defer></script>
</body>
</html>

