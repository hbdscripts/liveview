<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!--#include partials/head-theme.html-->
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="noindex, nofollow" />
  <link rel="icon" type="image/webp" href="/assets/logos/new/kexo.webp" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/core@1.4.0/dist/css/tabler.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/core@1.4.0/dist/css/tabler-flags.min.css" />
  <link rel="stylesheet" href="/tabler-theme.css" />
  <link rel="stylesheet" href="/custom.css" />
  <link rel="stylesheet" href="/diagnostics-modal.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsvectormap@1.6.0/dist/css/jsvectormap.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr@4.6.13/dist/flatpickr.min.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr@4.6.13/dist/flatpickr.min.js" defer></script>
  <title>Kexo Â· Overview</title>
  <script src="https://cdn.jsdelivr.net/npm/apexcharts@4.7.0/dist/apexcharts.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/jsvectormap@1.6.0/dist/jsvectormap.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/jsvectormap@1.6.0/dist/maps/world.js" defer></script>
</head>
<body class="" data-page="dashboard">
    <!--#include partials/header.html-->
    <!--#include partials/page-body-start.html-->
<div class="page-header mb-3">
  <div class="row align-items-center">
    <div class="col">
      <div class="page-pretitle">Dashboard</div>
      <h2 class="page-title">Overview</h2>
    </div>
  </div>
</div>
<div id="tab-panel-dashboard" class="main-tab-panel active" role="tabpanel" aria-labelledby="nav-tab-dashboard">

    <!-- Row 1: Online Now map (50%) + Sales overview line chart (50%) -->
    <div class="row g-3 mb-3">
      <div class="col-12 col-lg-6">
        <div class="card h-100" data-kexo-chart-key="live-online-chart">
          <div class="card-header d-flex align-items-center justify-content-between flex-wrap gap-2">
            <h3 class="card-title mb-0">Online Now: <span id="live-online-now-count">0</span></h3>
            <a href="/dashboard/live" class="btn btn-sm btn-ghost-primary">Live View</a>
          </div>
          <div class="card-body">
            <div class="dash-chart-wrap kexo-chart-wrap-min-220" id="live-online-chart"></div>
          </div>
        </div>
      </div>
      <div class="col-12 col-lg-6">
        <div class="card h-100 kexo-overview-main-card" data-kexo-chart-key="dash-chart-overview-30d">
          <div class="card-body kexo-overview-main-card-body">
            <div class="kexo-overview-card-head">
              <div class="kexo-overview-card-head-left">
                <div class="kexo-overview-running-totals kexo-overview-running-totals--main" id="dash-overview-running-totals" aria-label="Sales Overview totals">
                  <span class="kexo-overview-running-total is-revenue">
                    <span class="kexo-overview-running-total-label">Revenue</span>
                    <span class="kexo-overview-running-total-value" id="dash-overview-total-revenue">&mdash;</span>
                  </span>
                  <span class="kexo-overview-running-total is-cost">
                    <span class="kexo-overview-running-total-label">Cost <i class="fa-light fa-circle-info ms-1 text-muted kexo-overview-cost-breakdown-icon" id="dash-overview-cost-breakdown-icon" role="button" tabindex="0" aria-label="Cost breakdown"></i></span>
                    <span class="kexo-overview-running-total-value" id="dash-overview-total-cost">&mdash;</span>
                  </span>
                  <span class="kexo-overview-running-total is-profit">
                    <span class="kexo-overview-running-total-label">Profit</span>
                    <span class="kexo-overview-running-total-value" id="dash-overview-total-profit">&mdash;</span>
                  </span>
                </div>
              </div>
              <div class="kexo-overview-card-actions">
                <button type="button" class="btn btn-sm btn-ghost-secondary kexo-overview-cost-settings-btn" id="dash-cost-settings-btn">Cost Settings</button>
                <button type="button" class="btn btn-icon btn-ghost-secondary kexo-overview-chart-settings-btn" data-kexo-chart-settings-key="dash-chart-overview-30d" aria-label="Chart settings" title="Chart settings">
                  <i class="fa-light fa-gear" data-icon-key="chart-builder-icon" class="kexo-chart-cog-icon" aria-hidden="true"></i>
                </button>
              </div>
            </div>
            <div id="dash-chart-overview-30d" class="kexo-overview-main-chart"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Row 2: Top Countries (50%) + Top Products (50%) -->
    <div class="row g-3 mb-3">
      <div class="col-12 col-lg-6">
        <div class="card h-100" data-table-class="dashboard" data-table-zone="dashboard-top-countries" data-table-id="dash-top-countries">
          <div class="card-header">
            <h3 class="card-title" data-kexo-table-title="1">Top Countries</h3>
          </div>
          <div id="dash-top-countries-mount" data-kexo-table="dash-top-countries"></div>
          <div class="card-footer d-flex align-items-center justify-content-center is-hidden" id="dash-top-countries-pagination" aria-label="Top countries pagination"></div>
        </div>
      </div>
      <div class="col-12 col-lg-6">
        <div class="card h-100" data-table-class="dashboard" data-table-zone="dashboard-top-products" data-table-id="dash-top-products">
          <div class="card-header">
            <h3 class="card-title" data-kexo-table-title="1">Top Products</h3>
          </div>
          <div id="dash-top-products-mount" data-kexo-table="dash-top-products"></div>
          <div class="card-footer d-flex align-items-center justify-content-center is-hidden" id="dash-top-products-pagination" aria-label="Top products pagination"></div>
        </div>
      </div>
    </div>

    <!-- Row 3: Variants, Devices, Browsers (1/3 each) -->
    <div class="row g-3 mb-3" id="dash-widgets-row" aria-label="Dashboard widgets">
      <div class="col-12 col-lg-4">
        <div class="card h-100 kexo-widget-card" data-kexo-widget="variant">
          <div class="card-body kexo-widget-card-body">
            <div class="kexo-widget-head">
              <div class="kexo-widget-title kexo-widget-title-chevron" data-kexo-widget-dropdown="variant" role="button" tabindex="0" aria-haspopup="menu" aria-expanded="false" aria-controls="dash-widget-variant-menu">
                <span data-kexo-widget-dropdown-label="variant">Variants</span>
                <i class="fa-light fa-chevron-down ms-1 kexo-widget-chevron" aria-hidden="true"></i>
              </div>
              <div class="kexo-widget-head-right">
                <button type="button" class="btn btn-icon btn-ghost-secondary kexo-widget-settings-btn" data-kexo-widget-settings aria-label="Widget sort" title="Sort cards">
                  <i class="fa-light fa-gear" aria-hidden="true"></i>
                </button>
              </div>
            </div>
            <div class="kexo-widget-body">
              <div id="dash-widget-variant-mount" class="kexo-widget-mount" aria-live="polite"></div>
            </div>
            <div class="kexo-widget-menu is-hidden" id="dash-widget-variant-menu" role="menu" aria-hidden="true" data-kexo-widget-menu="variant"></div>
          </div>
        </div>
      </div>
      <div class="col-12 col-lg-4">
        <div class="card h-100 kexo-widget-card" data-kexo-widget="devices">
          <div class="card-body kexo-widget-card-body">
            <div class="kexo-widget-head">
              <div class="kexo-widget-title kexo-widget-title-chevron" data-kexo-widget-dropdown="devices" role="button" tabindex="0" aria-haspopup="menu" aria-expanded="false" aria-controls="dash-widget-devices-menu">
                <span data-kexo-widget-dropdown-label="devices">Devices</span>
                <i class="fa-light fa-chevron-down ms-1 kexo-widget-chevron" aria-hidden="true"></i>
              </div>
              <div class="kexo-widget-head-right">
                <button type="button" class="btn btn-icon btn-ghost-secondary kexo-widget-settings-btn" data-kexo-widget-settings aria-label="Widget sort" title="Sort cards">
                  <i class="fa-light fa-gear" aria-hidden="true"></i>
                </button>
              </div>
            </div>
            <div class="kexo-widget-body">
              <div id="dash-widget-devices-mount" class="kexo-widget-mount" aria-live="polite"></div>
            </div>
            <div class="kexo-widget-menu is-hidden" id="dash-widget-devices-menu" role="menu" aria-hidden="true" data-kexo-widget-menu="devices"></div>
          </div>
        </div>
      </div>
      <div class="col-12 col-lg-4">
        <div class="card h-100 kexo-widget-card" data-kexo-widget="browsers">
          <div class="card-body kexo-widget-card-body">
            <div class="kexo-widget-head">
              <div class="kexo-widget-title kexo-widget-title-chevron" data-kexo-widget-dropdown="browsers" role="button" tabindex="0" aria-haspopup="menu" aria-expanded="false" aria-controls="dash-widget-browsers-menu">
                <span data-kexo-widget-dropdown-label="browsers">Browsers</span>
                <i class="fa-light fa-chevron-down ms-1 kexo-widget-chevron" aria-hidden="true"></i>
              </div>
              <div class="kexo-widget-head-right">
                <button type="button" class="btn btn-icon btn-ghost-secondary kexo-widget-settings-btn" data-kexo-widget-settings aria-label="Widget sort" title="Sort cards">
                  <i class="fa-light fa-gear" aria-hidden="true"></i>
                </button>
              </div>
            </div>
            <div class="kexo-widget-body">
              <div id="dash-widget-browsers-mount" class="kexo-widget-mount" aria-live="polite"></div>
            </div>
            <div class="kexo-widget-menu is-hidden" id="dash-widget-browsers-menu" role="menu" aria-hidden="true" data-kexo-widget-menu="browsers"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Row 4: Attribution, Payment methods, Abandoned (1/3 each) -->
    <div class="row g-3 mb-3">
      <div class="col-12 col-lg-4">
        <div class="card h-100 kexo-widget-card" data-kexo-widget="attribution">
          <div class="card-body kexo-widget-card-body">
            <div class="kexo-widget-head">
              <div class="kexo-widget-title">Attribution</div>
              <div class="kexo-widget-head-right">
                <button type="button" class="btn btn-icon btn-ghost-secondary kexo-widget-settings-btn" data-kexo-widget-settings aria-label="Widget sort" title="Sort cards">
                  <i class="fa-light fa-gear" aria-hidden="true"></i>
                </button>
              </div>
            </div>
            <div class="kexo-widget-body">
              <div id="dash-widget-attribution-mount" class="kexo-widget-mount" aria-live="polite"></div>
            </div>
            <div class="kexo-widget-menu is-hidden" id="dash-widget-attribution-menu" role="menu" aria-hidden="true" data-kexo-widget-menu="attribution"></div>
          </div>
        </div>
      </div>
      <div class="col-12 col-lg-4">
        <div class="card h-100 kexo-widget-card" data-kexo-widget="payment-types">
          <div class="card-body kexo-widget-card-body">
            <div class="kexo-widget-head">
              <div class="kexo-widget-title">Payment methods</div>
              <div class="kexo-widget-head-right">
                <button type="button" class="btn btn-icon btn-ghost-secondary kexo-widget-settings-btn" data-kexo-widget-settings aria-label="Widget sort" title="Sort cards">
                  <i class="fa-light fa-gear" aria-hidden="true"></i>
                </button>
              </div>
            </div>
            <div class="kexo-widget-body">
              <div id="dash-widget-payment-types-mount" class="kexo-widget-mount" aria-live="polite"></div>
            </div>
            <div class="kexo-widget-menu is-hidden" id="dash-widget-payment-types-menu" role="menu" aria-hidden="true" data-kexo-widget-menu="payment-types"></div>
          </div>
        </div>
      </div>
      <div class="col-12 col-lg-4">
        <div class="card h-100 kexo-widget-card" data-kexo-widget="abandoned">
          <div class="card-body kexo-widget-card-body">
            <div class="kexo-widget-head">
              <div class="kexo-widget-title">Abandoned Carts</div>
              <div class="kexo-widget-head-right">
                <button type="button" class="btn btn-icon btn-ghost-secondary kexo-widget-settings-btn" data-kexo-widget-settings aria-label="Widget sort" title="Sort cards">
                  <i class="fa-light fa-gear" aria-hidden="true"></i>
                </button>
              </div>
            </div>
            <div class="kexo-widget-body">
              <div id="dash-widget-abandoned-mount" class="kexo-widget-mount" aria-live="polite"></div>
            </div>
            <div class="kexo-widget-menu is-hidden" id="dash-widget-abandoned-menu" role="menu" aria-hidden="true" data-kexo-widget-menu="abandoned"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="kexo-widget-menu is-hidden kexo-widget-sort-menu" id="dash-widget-sort-menu" role="menu" aria-hidden="true" data-kexo-widget-menu="sort">
      <button type="button" class="kexo-widget-menu-item" role="menuitem" data-kexo-widget-sort="revenue">Revenue</button>
      <button type="button" class="kexo-widget-menu-item" role="menuitem" data-kexo-widget-sort="conversion">Conversion Rate</button>
      <button type="button" class="kexo-widget-menu-item" role="menuitem" data-kexo-widget-sort="clicks">Clicks</button>
    </div>

    <!-- Profit Rules modal (shared with Snapshot; used for Dashboard Cost Settings shortcut) -->
    <div class="modal modal-blur kexo-modal-hidden" id="profit-rules-modal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable" role="dialog" aria-modal="true" aria-label="Profit Rules">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Profit Rules</h5>
            <button type="button" class="btn-close" id="profit-rules-close-btn" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <ul class="nav nav-tabs mb-3">
              <li class="nav-item"><button type="button" class="nav-link active" data-pr-tab="rules">Rules</button></li>
              <li class="nav-item"><button type="button" class="nav-link" data-pr-tab="integrations">Integrations</button></li>
            </ul>

            <div class="mb-3" id="profit-rules-tab-rules">
              <label class="form-check form-switch mb-3">
                <input class="form-check-input" type="checkbox" id="profit-rules-enabled" />
                <span class="form-check-label">Enable estimated profit in Snapshot</span>
              </label>

              <div class="mb-3">
                <h6 class="mb-2">Additional cost groups</h6>
                <div class="d-flex flex-column gap-2">
                  <label class="form-check form-switch mb-0">
                    <input class="form-check-input" type="checkbox" id="profit-rules-include-payment-fees" />
                    <span class="form-check-label">Include Transaction Fees in Cost</span>
                  </label>
                  <label class="form-check form-switch mb-0">
                    <input class="form-check-input" type="checkbox" id="profit-rules-include-klarna-fees" />
                    <span class="form-check-label">Include Shopify Fees in Cost</span>
                  </label>
                  <label class="form-check form-switch mb-0">
                    <input class="form-check-input" type="checkbox" id="profit-rules-include-tax" />
                    <span class="form-check-label">Include Tax in Cost</span>
                  </label>
                </div>
                <div class="text-muted small mt-2">These toggles are included in Snapshot Cost, cost chart, and estimated profit deductions.</div>
              </div>

              <div class="d-flex align-items-center justify-content-between mb-2">
                <h6 class="m-0">Rules</h6>
                <button type="button" class="btn btn-sm btn-outline-primary" id="profit-rules-add-btn">Add rule</button>
              </div>
              <div class="text-muted small mb-2">Rules run in priority order. Scope can be All countries or a specific ISO country code.</div>

              <div id="profit-rules-msg" class="is-hidden"></div>

              <div class="table-responsive">
                <table class="table table-sm">
                  <thead>
                    <tr>
                      <th>Rule</th>
                      <th>Type</th>
                      <th class="text-end">Value</th>
                      <th class="text-center">Country</th>
                      <th class="text-center">Enabled</th>
                      <th class="text-end">Actions</th>
                    </tr>
                  </thead>
                  <tbody id="profit-rules-table-body"></tbody>
                </table>
              </div>

              <div class="card mt-3 is-hidden" id="profit-rules-form-wrap">
                <div class="card-body">
                  <input type="hidden" id="profit-rule-id" />
                  <div class="row g-2">
                    <div class="col-12 col-md-4">
                      <label class="form-label">Name</label>
                      <input type="text" id="profit-rule-name" class="form-control" />
                    </div>
                    <div class="col-12 col-md-3">
                      <label class="form-label">Type</label>
                      <select id="profit-rule-type" class="form-select">
                        <option value="percent_revenue">% of revenue</option>
                        <option value="fixed_per_order">Fixed per order</option>
                        <option value="fixed_per_period">Fixed per period</option>
                      </select>
                    </div>
                    <div class="col-12 col-md-2">
                      <label class="form-label">Value</label>
                      <input type="number" id="profit-rule-value" class="form-control" min="0" step="0.01" />
                    </div>
                    <div class="col-12 col-md-2">
                      <label class="form-label">Country</label>
                      <input type="text" id="profit-rule-country" class="form-control" maxlength="2" placeholder="ALL" />
                    </div>
                    <div class="col-12 col-md-1">
                      <label class="form-label">Sort</label>
                      <input type="number" id="profit-rule-sort" class="form-control" min="1" step="1" />
                    </div>
                  </div>
                  <label class="form-check mt-2">
                    <input class="form-check-input" type="checkbox" id="profit-rule-enabled" checked />
                    <span class="form-check-label">Rule enabled</span>
                  </label>
                  <div class="d-flex gap-2 mt-3">
                    <button type="button" class="btn btn-primary" id="profit-rule-save-btn">Save rule</button>
                    <button type="button" class="btn btn-ghost-secondary" id="profit-rule-cancel-btn">Cancel</button>
                  </div>
                </div>
              </div>
            </div>

            <div class="mb-2 is-hidden" id="profit-rules-tab-integrations">
              <label class="form-check form-switch mb-0">
                <input class="form-check-input" type="checkbox" id="profit-rules-include-google-ads" />
                <span class="form-check-label">Include Google Ads spend in Cost</span>
              </label>
              <div class="text-muted small mt-2">Integrations currently available here: Google Ads.</div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-ghost-secondary" id="profit-rules-dismiss-btn">Close</button>
            <button type="button" class="btn btn-primary" id="profit-rules-save-btn">Save Rules</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Row 5: Trending Up (50%) + Trending Down (50%) -->
    <div class="row g-3 mb-3">
      <div class="col-12 col-lg-6">
        <div class="card h-100" data-table-class="dashboard" data-table-zone="dashboard-trending-up" data-table-id="dash-trending-up">
          <div class="card-header">
            <h3 class="card-title" data-kexo-table-title="1">Trending Up</h3>
          </div>
          <div id="dash-trending-up-mount" data-kexo-table="dash-trending-up"></div>
          <div class="card-footer d-flex align-items-center justify-content-center is-hidden" id="dash-trending-up-pagination" aria-label="Trending up pagination"></div>
        </div>
      </div>
      <div class="col-12 col-lg-6">
        <div class="card h-100" data-table-class="dashboard" data-table-zone="dashboard-trending-down" data-table-id="dash-trending-down">
          <div class="card-header">
            <h3 class="card-title" data-kexo-table-title="1">Trending Down</h3>
          </div>
          <div id="dash-trending-down-mount" data-kexo-table="dash-trending-down"></div>
          <div class="card-footer d-flex align-items-center justify-content-center is-hidden" id="dash-trending-down-pagination" aria-label="Trending down pagination"></div>
        </div>
      </div>
    </div>

  </div>
    <!--#include partials/page-body-end.html-->
      <!--#include partials/footer.html-->
    </div>
  </div>
  <div class="config-modal" id="kpi-compare-modal" aria-hidden="true">
    <div class="config-modal-card kpi-compare-modal-card" role="dialog" aria-modal="true" aria-label="KPI comparison">
      <div class="kpi-compare-modal-header">
        <div class="kpi-compare-modal-header-left">
          <div class="kpi-compare-kicker" id="kpi-compare-kicker">KPI</div>
          <h3 class="kpi-compare-title">Shopify vs Kexo</h3>
          <div class="kpi-compare-meta" id="kpi-compare-updated">Updated &mdash;</div>
        </div>
        <div class="kpi-compare-modal-actions">
          <button type="button" id="kpi-compare-refresh-btn" class="btn btn-icon btn-ghost-secondary" title="Refresh comparison" aria-label="Refresh comparison">
            <i class="fa-light fa-rotate-right" data-icon-key="kpi-compare-refresh"></i><span>Refresh</span>
          </button>
          <button type="button" class="btn btn-icon btn-ghost-secondary" id="kpi-compare-close-btn" aria-label="Close"><i class="fa-light fa-xmark" data-icon-key="kpi-compare-close"></i></button>
        </div>
      </div>
      <div class="kpi-compare-modal-body" id="kpi-compare-status">
        <div class="kpi-compare-loading"><div class="report-build-wrap"><div class="spinner-border text-primary" role="status"></div><div class="report-build-title">building KPI comparison</div><div class="report-build-step">&mdash;</div></div></div>
      </div>
    </div>
  </div>

  <div class="modal modal-blur kexo-modal-hidden" id="date-custom-modal" tabindex="-1">
    <div class="modal-dialog modal-sm modal-dialog-centered" role="dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Choose dates</h5>
          <button type="button" class="btn-close" id="date-custom-close-btn" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <label class="form-label">Date Range (max 30 days)</label>
          <input type="text" id="date-range-picker" class="form-control" placeholder="Select dates..." readonly>
          <div class="text-muted small mt-2">
            <i class="fa-light fa-circle-info" data-icon-key="kpi-compare-date-info"></i> Dates without data will be disabled
          </div>
        </div>
        <div class="modal-footer">
          <div class="text-muted small" id="date-custom-summary"></div>
          <button type="button" class="btn btn-ghost-secondary" id="date-custom-clear">Clear</button>
          <button type="button" class="btn btn-primary" id="date-custom-apply" disabled>Apply</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@tabler/core@1.4.0/dist/js/tabler.min.js" defer></script>
  <script src="/kexo-table-builder.js" defer></script>
  <script src="/kexo-table-defs.js" defer></script>
  <script src="/kexo-chart-defs.js" defer></script>
  <script src="/kexo-chart-builder.js" defer></script>
  <script src="/app.js" defer></script>
  <script src="/theme-settings.js" defer></script>
</body>
</html>
