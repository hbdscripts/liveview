# =============================================================================
# Live Visitors – copy to .env and fill. For Railway: set same vars in Service → Variables.
# Base URL for this app: https://liveview-production.up.railway.app
# =============================================================================

# --- Shopify app (from Partners or Admin → Apps → Develop apps) ---
# Client ID from app overview
SHOPIFY_API_KEY=
# Client secret (click "Show" on the app)
SHOPIFY_API_SECRET=
# Must be this app's public URL (no trailing slash). Same as shopify.app.toml application_url.
SHOPIFY_APP_URL=https://liveview-production.up.railway.app
# Scopes; must include write_pixels,read_customer_events if you use pixel API
SHOPIFY_SCOPES=read_products,read_orders,write_pixels,read_customer_events

# --- Pixel ingest (required for dashboard to receive events) ---
# Generate once: node scripts/generate-ingest-secret.js  then paste below and into pixel extension settings
INGEST_SECRET=

# --- Display ---
ADMIN_TIMEZONE=Europe/London

# --- Time windows (minutes unless noted) ---
ACTIVE_WINDOW_MINUTES=5
RECENT_WINDOW_MINUTES=15
SESSION_TTL_MINUTES=1440
ABANDONED_WINDOW_MINUTES=15
ABANDONED_RETENTION_HOURS=24
RETURNING_GAP_MINUTES=30
CHECKOUT_STARTED_WINDOW_MINUTES=15

# --- Database ---
# Local: leave empty (SQLite file). Railway: REQUIRED – add Postgres service, then Variables → DB_URL = Postgres connection string (e.g. from Postgres service → Connect → DATABASE_URL)
DB_URL=

# --- Tracking default (DB setting can override at runtime) ---
TRACKING_DEFAULT_ENABLED=true

# --- Limits ---
MAX_EVENTS_PER_SESSION=50
MAX_EVENT_PAYLOAD_BYTES=8192
RATE_LIMIT_EVENTS_PER_MINUTE=120

# --- Sentry (optional). Project → Settings → Client Keys (DSN). Leave empty to disable.
SENTRY_DSN=

# --- Dashboard: direct visit = Google sign-in only (from Shopify Admin = no login) ---
# Google Cloud Console → APIs & Services → Credentials → Create OAuth 2.0 Client ID (Web application)
# Authorized redirect URI: https://liveview-production.up.railway.app/auth/google/callback
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
# Sign session cookie (generate once): node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
OAUTH_COOKIE_SECRET=
# Optional: comma-separated emails that can sign in. Empty = any Google account.
ALLOWED_GOOGLE_EMAILS=
# Storefront domain for product thumbnails when dashboard opened without ?shop= (e.g. mystore.myshopify.com). Falls back to ALLOWED_SHOP_DOMAIN.
SHOP_DOMAIN=
