# Live Visitors pixel â€“ declare essential so it runs without requiring consent
# https://shopify.dev/docs/api/web-pixels-api/pixel-privacy

api_version = "2024-01"

[[extensions]]

uid = "d2d15754-01f5-8185-f093-6314927881869349fe24"

type = "web_pixel_extension"
name = "Kexo"
handle = "live-visitors-pixel"
runtime_context = "strict"

# Run without requiring visitor consent (strictly necessary / essential)
[customer_privacy]
analytics = false
marketing = false
preferences = false
sale_of_data = "disabled"

[extensions.settings]
type = "object"

[extensions.settings.fields.ingestUrl]
name = "Ingest URL"
description = "Full URL to POST events (e.g. https://your-app.com/api/ingest)"
type = "single_line_text_field"

[extensions.settings.fields.ingestSecret]
name = "Ingest Secret"
description = "Secret for X-Ingest-Secret header (same as INGEST_SECRET in .env)"
type = "single_line_text_field"

[extensions.settings.fields.sessionMode]
name = "Session Mode"
description = "legacy (per-tab) or shared_ttl (share across tabs, 30m inactivity). Typically set by the app dashboard toggle."
type = "single_line_text_field"
